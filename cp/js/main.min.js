function is_string(e){return"string"==typeof e}function is_object(e){return"object"==typeof e}function is_number(e){return"number"==typeof e}function is_undefined(e){return"undefined"==typeof e}function is_defined(e){return"undefined"!=typeof e}function is_null(e){return null==e}function getChar(e){return null==e.which?e.keyCode<32?null:String.fromCharCode(e.keyCode):0!=e.which&&0!=e.charCode?e.which<32?null:String.fromCharCode(e.which):null}function on(e,t,i){e&&t.split(" ").forEach(function(t){e.addEventListener(t,i)})}function scrollToElement(e){if($(e).length){var t;t=$(e).closest(".popup").length?$(e).closest(".popup"):$(e),t.stop().animate({scrollTop:$(e).position().top},"fast")}}function formatMoney(e,t,i,n){var t=isNaN(t=Math.abs(t))?2:t,i=void 0==i?".":i,n=void 0==n?",":n,o=0>e?"-":"",s=parseInt(e=Math.abs(+e||0).toFixed(t))+"",r=(r=s.length)>3?r%3:0;return o+(r?s.substr(0,r)+n:"")+s.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?i+Math.abs(e-s).toFixed(t).slice(2):"")}function getMax(e){return Math.max.apply(Math,e)}function getMin(e){return Math.min.apply(Math,e)}function declOfNum(e,t){return cases=[2,0,1,1,1,2],t[e%100>4&&20>e%100?2:cases[5>e%10?e%10:5]]}function debounce(e,t,i){var n;return function(){var o=this,s=arguments,r=function(){n=null,i||e.apply(o,s)},a=i&&!n;clearTimeout(n),n=setTimeout(r,t),a&&e.apply(o,s)}}function once(e,t){var i;return function(){return e&&(i=e.apply(t||this,arguments),e=null),i}}function levenshtein(e,t,i){var n,o,s,r,a,l,c,d,u,h,p;s=e.length,r=t.length,i=i||{};var f=i.replace||1,m=i.replaceCase||i.replace||1,g=i.insert||1,v=i.remove||1;p=a=Math.max(s,r);var y=Math.min(v,g,f),b=Math.max(y,(s-r)*v),w=Math.max(y,(r-s)*g),_=new Array(2*p-1);for(n=0;r>=n;++n)_[n]=n*b;for(n=0;s>n;++n,a=p-a)for(l=e[n],c=l.toLowerCase(),_[a]=(n+1)*w,d=a,u=p-a,o=0;r>o;++o,++d,++u)h=l===t[o]?0:c===t[o].toLowerCase()?m:f,_[d+1]=Math.min(_[u+1]+v,_[d]+g,_[u]+h);return _[r+p-a]}function saving(e,t){$.ajax({url:"/"+ADMIN_DIR+"/save/",type:"post",data:{id:e,cont:t,pathname:location.pathname},dataType:"JSON",success:function(e){1==e?alert("Данные удачно сохранены."):alert("Ошибка, данные небыли сохранены.")}})}function isFullScreen(e){return/\bCodeMirror-fullscreen\b/.test(e.getWrapperElement().className)}function winHeight(){return window.innerHeight||(document.documentElement||document.body).clientHeight}function setFullScreen(e,t){var i=e.getWrapperElement(),n=e.getScrollerElement();t?(i.className+=" CodeMirror-fullscreen",n.style.height=winHeight()+"px",document.documentElement.style.overflow="hidden"):(i.className=i.className.replace(" CodeMirror-fullscreen",""),n.style.height="",document.documentElement.style.overflow=""),e.refresh()}function is_numeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}function checkAll(e){var t=$(e).prop("checked");$(".check-all-spy").prop("checked",t)}function addTemplate(e){return e.preventDefault(),$("#addtemplate").find("input").attr("disabled",!1),$("#addtemplate").toggle(),!1}function addTemplateFile(e){var t=$("#template_name").val(),i=$("#template_file").val();return $.post("/"+ADMIN_DIR+"/ajax/structure/",{act:"ajaxAddTemplate",name:t,file:i},function(t){if(t.length>0){var i="",n="";i+='<select name="stc_tid" id="templates_list">';for(var o in t)""!==e&&(n=e==t[o].id?'selected="selected"':""),i+='<option value="'+t[o].id+'" '+n+">"+t[o].name+"</option>";i+="</select>",$("#select_field").html(i),selectize("#templates_list")}$("#addtemplate").find("input").attr("disabled",!0),$("#addtemplate").hide()},"json"),!1}function yandexMaps(e){var t={link:null,mapid:"map-conteiner-"+e,place:"krasnodar",type:"yandex#map",city:{krasnodar:[45.09471716593029,39.01589900000001],moscow:[55.76,37.64]},getBaloon:function(e){return new ymaps.Placemark(e,{},{draggable:!0})},draw:function(e){t.link=new e.Map(this.mapid,{center:t.city[this.place],zoom:12,type:t.type}),t.link.controls.add("smallZoomControl",{right:10,top:15}).add(new e.control.ScaleLine).add("searchControl",{left:20,top:20});var i=this.getBaloon(t.city[this.place]);t.link.events.add("click",function(e){t.link.geoObjects.remove(i),i=t.getBaloon(e.get("coordPosition")),t.link.geoObjects.add(i),t.setCoord(e.get("coordPosition"))}),t.link.geoObjects.add(i).events.add("dragend",function(e){var i=e.get("target"),n=i.geometry.getCoordinates();i.properties.set("balloonContent",n),t.setCoord(n)})},add:function(){if(1==arguments.length)t.link.geoObjects.add(new ymaps.GeoObject({geometry:{type:"Point",coordinates:arguments[0]}}));else{for(var e=new ymaps.GeoObjectCollection,i=0;i<arguments.length;i++)e.add(new ymaps.Placemark(arguments[i]));t.link.geoObjects.add(e)}}};ymaps.ready(function(){t.draw(ymaps)})}function googleMaps(e){new google.maps.Map(d.getElementById("map-conteiner-"+e),{zoom:14,zoomControl:!1,panControl:!1,scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1,draggable:!0,disableDoubleClickZoom:!0,center:new google.maps.LatLng(45.053548,39.016056)})}function selectize(e){e=e||"select",is_string(e)?$selector=$(e):is_object(e)&&($selector=e),$selector.chosen({width:"100%",allow_single_deselect:!0,no_results_text:"Не найдено!",disable_search_threshold:10})}function changeRow(e){var t=$(e).prop("checked");t?$(e).closest("tr").find("td").addClass("ch"):$(e).closest("tr").find("td").removeClass("ch")}function toggle_small_photo(e){$("#"+e).toggle()}function removeSection(e,t,i,n){if(t.preventDefault(),confirm("Вы действительно хотите удалить?")){i=parseInt(i);var o,s=[],r=$(e).val().split(",");for(o in r)""!==r[o]&&parseInt(r[o])!==i&&s.push(parseInt(r[o]));$(n).remove(),$(e).val(s.length>1?s.join(","):s)}return!1}function slider(e,t,i,n,o,s){var r="#"+e;s=s?s:"horizontal",n=n||0,o=o||100;var a=i,l="lower",c="tap-drag";"range"==t&&(c="tap-drag",l=!0,a=[i[0],i[1]]),$(r).noUiSlider({animate:!1,orientation:s,start:a,connect:l,behaviour:c,range:{min:n,max:o}}),"range"==t?($(r).Link("lower").to($(r+"-min"),null,wNumb({decimals:0})),$(r).Link("upper").to($(r+"-max"),null,wNumb({decimals:0}))):$(r).Link("lower").to($(r+"-value"),null,wNumb({decimals:0}))}function metaCounter(){$(".count-number").on("keyup",function(){var e=$(this).closest(".count-number-block"),t=e.find(".count-number-block-count"),i=parseInt(t.data("recomend"))||"";t.html($(this).val().length+(""!==i?"/"+i:"")),""!==i&&$(this).val().length>i?t.addClass("unlim"):t.hasClass("unlim")&&t.removeClass("unlim")})}function seoCrowl(){$("input[name='changefreq']").on("change",function(){"fixed"==$.trim($(this).val())?$("#changefreq_fixed").removeClass("hidden"):$("#changefreq_fixed").addClass("hidden")}),$("input[name='priority']").on("change",function(){"fixed"==$.trim($(this).val())?$("#priority_fixed").removeClass("hidden"):$("#priority_fixed").addClass("hidden")})}function toggle_item(e,t,i,n){e.preventDefault(),$("#"+i).toggle();var o=$(t).find(".icon");o.hasClass(n[0])?(o.removeClass(n[0]),o.addClass(n[1])):(o.removeClass(n[1]),o.addClass(n[0]))}function switch_type_fields(e){e.checked===!0?($("#case2").hide(),$("#case2 input").attr({disabled:!0}),$("#case1").show(),$("#case1 input").attr({disabled:!1})):($("#case1").hide(),$("#case1 input").attr({disabled:!0}),$("#case2").show(),$("#case2 input").attr({disabled:!1}))}function show_tr(e){var t=$(e).val();10==t||11==t||12==t?$("#to_list").show():$("#to_list").hide()}function translate_key(e){$(e).val(PassGenJS.getPassword({symbols:0,letters:random(14,24),numbers:0,lettersUpper:0}))}function secret(e,t){$(e).val(PassGenJS.getPassword({symbols:0,letters:random(2,4),numbers:random(2,4),lettersUpper:random(3,7)}))}function random(e,t){return e=e||0,t=t||100,Math.floor(Math.random()*(t-e+1))+e}function token(e){e=e||8;var t="",n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(i=1;i<e;i++){var o=Math.floor(Math.random()*n.length+1);t+=n.charAt(o)}return t}function del_list_fields(e){return cp.dialog("Вы дейсвительно хотите удалить поле?")&&$("#tr"+e).remove(),!1}function add_list_fields(){field_counter++,str='<tr id="tr'+field_counter+'">',str+='<td><input type="hidden" name="field_id['+field_counter+']" value="0" />',str+='<input type="text" name="field_name['+field_counter+']" class="bord padd ness" /></td>',str+='<td><input type="text" name="field_sys_name['+field_counter+']" class="bord padd ness" /></td>',str+='<td><select name="field_type['+field_counter+']" class="field_type ness" id="'+field_counter+'" onchange="select_type(this);">',$.each(arr_field_type,function(e,t){1*e&&(str+='<option value="'+e+'">'+t+"</option>")}),str+="</select></td>",str+='<td class="addition"></td>',str+='<td><input type="text" name="f_ord['+field_counter+']" value="'+field_counter+'0" class="bord padd w60px r" /></td>',str+='<td style="text-align:center"><input type="checkbox" name="in_list['+field_counter+']" /></td>',str+='<td class="actions c"><a href="#" class="ctr_a ctr_del margin" title="Удалить" onclick="del_list_fields('+field_counter+');return false;"></a></td>',str+="</tr>",$("#add_btn").before(str)}function add_list_fields_list(){field_counter++;var e=['<tr id="tr'+field_counter+'">',"<td>",'<input type="hidden" name="field_id['+field_counter+']" value="0">','<input name="var['+field_counter+']" placeholder="Например: Краснодарский край">',"</td>",'<td><input name="value['+field_counter+']" placeholder="Например: 23"></td>','<td><label class="controll"><input type="checkbox" class="controll__input" value="'+field_counter+'" name="default['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td><input name="ord['+field_counter+']" value="'+field_counter+'0" class="ord integer reducing-trigger"></td>','<td class="tac"><a href="#" class="icon icon-delete remove-trigger" title="Удалить" onclick="del_list_fields('+field_counter+');return false;"></a></td>',"</tr>"].join("");$("#add_btn").before(e)}function del_fields(e){field_counter--,$("#tr"+e).remove()}function add_fields(){field_counter++;var e="",t="";for(t in arr_field_type)"string"==typeof arr_field_type[t]&&(e+='<option value="'+t+'">'+arr_field_type[t]+"</option>");var i=['<tr id="tr'+field_counter+'">','<td class="va_t"><input name="f_name['+field_counter+']" class="ness"></td>','<td class="va_t"><input name="f_sys_name['+field_counter+']" class="ness"></td>','<td class="va_t"><select name="f_type['+field_counter+']" class="f_type ness" data-placeholder="Тип поля" id="fieldtype_'+field_counter+'" onchange="select_type(this)">',e,"</select></td>",'<td class="addition va_t">'+get_addition("input",field_counter)+"</td>",'<td class="va_t"><input name="f_ord['+field_counter+']" value="'+field_counter+'0"></td>','<td class="va_m tac"><label class="controll controll_single"><input type="checkbox" class="controll__input" value="1" name="f_in_list['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td class="va_m tac"><label class="controll controll_single"><input type="checkbox" class="controll__input" value="1" name="f_index['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td class="va_m tac"><label class="controll controll_single"><input type="checkbox" class="controll__input" value="1" name="f_unique['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td class="tac"><a href="#" class="icon icon-delete remove-trigger" title="Удалить" onclick="del_fields('+field_counter+');return false;"></a></td>',"</tr>"].join("");$("#add_btn").before(i),selectize("#fieldtype_"+field_counter)}function add_fields_list(){field_counter++,str=['<tr id="tr'+field_counter+'">','<td><input name="var['+field_counter+']"></td>','<td><input name="value['+field_counter+']"></td>','<td><input type="checkbox" name="default['+field_counter+']"></td>','<td><input name="ord['+field_counter+']" value="'+field_counter+'0"></td>','<td class="tac"><a href="#" class="icon icon-delete remove-trigger" title="Удалить" onclick="del_fields('+field_counter+');return false;"></a></td>',"</tr>"].join("\n"),$("#add_btn").before(str)}function select_type(e){var t=1*$(e).attr("id").split("_")[1],i=$("#tr"+t+" .addition"),n=get_addition(e.value.split(":")[0],t);$(i).empty().append(n||""),selectize()}function get_addition(e,t){var i=[],n=[];if(["input","cost","int","hidden","document","timestamp","email","list","autocomplete","select","float","system","multiselect","datetime"].indexOf(e)>=0&&(n=['<div class="group">','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="25"><span class="group__item__style"></span><span class="group__item__text">25%</span></label>','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="50"><span class="group__item__style"></span><span class="group__item__text">50%</span></label>','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="75"><span class="group__item__style"></span><span class="group__item__text">75%</span></label>','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="100" checked><span class="group__item__style"></span><span class="group__item__text">100%</span></label>',"</div>"],["list","autocomplete","select","radio","multiselect","checkbox","system"].indexOf(e)>=0&&n.push('<div class="cb mb10"></div>')),"hidden"==e&&n.push('<input value="" name="f_hidden_default['+t+']" placeholder="Значение по умолчанию">'),"system"==e&&n.push('<input value="" name="f_binding['+t+']" placeholder="Например поле (title)">'),"date"==e&&(i=['<div class="help-cover">','<input name="f_date_format['+t+']" value="DD.MM.YYYY" placeholder="Формат даты">','<div class="tooltip tooltip-down">',"D — день,<br>","M — месяц (без нуля впереди)<br>","DD, MM — день и месяц с нулём впереди для значений от 1 до 9<br>","YY — 2-символьное обозначение года<br>","YYYY — 4-символьное обозначение года (год пишется полностью)","</div>","</div>"],n.push(i.join("\n"))),["file","image"].indexOf(e)>=0&&(i=['<div class="option-group option-combo">','<label><input type="radio" name="f_file_count['+t+']" value="0"><span class="option">Один файл</span></label>','<label><input type="radio" name="f_file_count['+t+']" value="1" checked><span class="option">Много файлов</span></label>',"</div>"],"image"==e&&i.push('<div class="cb mb10"></div>'),n.push(i.join("\n"))),["gallery","image"].indexOf(e)>=0&&"undefined"!=typeof CONFIGURE&&"undefined"!=typeof CONFIGURE.image){var o,s=[],r=[],a=[],l="";s=['<div class="js-size-list">','<table class="table-simple">','<col><col><col><col width="57"><col width="20">',"<thead>","<tr>",'<td class="h">Префикс</td>','<td class="h">Ширина</td>','<td class="h">Высота</td>','<td class="h">Метод</td>','<td class="h"></td>',"</tr>","</thead>","<tbody>"],r=template("tpl_image_row",{index:0,button:!0,iteration:t}),a=["</tbody>","</table>",'<a href="#" class="add-size js-add-size" data-iteration="{$smarty.foreach.i.iteration}"><i class="icon icon-plus-square"></i> Добавить размер</a>',"</div>"],n.push(s.join("\n")),n.push(r),n.push(a.join("\n"))}if(["embedded"].indexOf(e)>=0){if(!is_undefined(MODULE_LIST)){var c,d="";for(c in MODULE_LIST)d+='<option value="'+c+'">'+MODULE_LIST[c].name+"</option>"}i=['<div class="j-select-wrapper">','<div class="mb5">','<select name="f_module['+t+']" data-placeholder="Выбрать модуль" class="j-select-choosen">','<option value="0">---</option>',d,"</select>","</div>",'<div class="clearfix j-select-container">','<select name="f_fields['+t+'][]" multiple data-placeholder="Выбрать" disabled></select>',"</div>","</div>"],n.push(i.join("\n"))}if(["list","section","autocomplete","select","radio","checkbox","multiselect"].indexOf(e)>=0&&(i=['<div class="cb clearfix">','<label class="controll"><input type="checkbox" class="controll__input" value="1" onchange="switch_types(this)" name="f_use_table_list['+t+']"><span class="controll__visible controll__visible_checkbox"></span><span class="controll__text">привязать к `#__mdd_lists`</span></label>','<div class="case case0">','<input name="f_table_name['+t+']" value="" class="mb5" placeholder="Название таблицы (#_news)">','<input name="f_table_field['+t+']" value="" placeholder="Поле (title)">',"</div>",'<div class="case case1 hidden">','<input name="f_table_list['+t+']" disabled placeholder="BIND списка" value="">',"</div>","</div>"],n.push(i.join("\n"))),["range","slider"].indexOf(e)>=0&&(i=['<div class="-col">','<div class="-left">','<input name="f_range['+t+'][min]" value="" placeholder="Min" class="integer">',"</div>",'<div class="-right">','<input name="f_range['+t+'][max]" value="" placeholder="Max" class="integer">',"</div>","</div>"],n.push(i.join("\n"))),"editor"==e&&"undefined"!=typeof CONFIGURE&&"undefined"!=typeof CONFIGURE.editor){i=[],i.push('<div class="option-group option-combo">');var o,l="";for(o in CONFIGURE.editor)l="","undefined"!=typeof CONFIGURE.editor[o]["default"]&&1==CONFIGURE.editor[o]["default"]&&(l=" checked"),i.push('<label><input type="radio" name="f_editor['+t+']" value="'+CONFIGURE.editor[o].system+'" '+l+'><span class="option">'+CONFIGURE.editor[o].name+"</span></label>");if(i.push("</div>"),"undefined"!=typeof CONFIGURE&&"undefined"!=typeof CONFIGURE.editor_mode){i.push('<div class="cb mb10"></div>'),i.push('<div class="option-group">');for(o in CONFIGURE.editor_mode)i.push('<label><input type="radio" name="f_editor_mode['+t+']" value="'+CONFIGURE.editor_mode[o]+'"><span class="option">'+CONFIGURE.editor_mode[o]+"</span></label>");i.push("</div>")}n.push(i.join("\n"))}if("redactor"==e&&"undefined"!=typeof CONFIGURE&&"undefined"!=typeof CONFIGURE.redactor){i=[],i.push('<div class="group">');var o,l="";for(o in CONFIGURE.redactor)"undefined"!=typeof CONFIGURE.redactor[o].name&&"undefined"!=typeof CONFIGURE.redactor[o].system&&(l="","undefined"!=typeof CONFIGURE.redactor[o]["default"]&&1==CONFIGURE.redactor[o]["default"]&&(l=" checked"),i.push('<label class="group__item"><input type="radio" class="group__item__rb" name="f_redactor['+t+']" value="'+CONFIGURE.redactor[o].system+'"'+l+'><span class="group__item__style"></span><span class="group__item__text">'+CONFIGURE.redactor[o].name+"</span></label>"));i.push("</div>"),n.push(i.join("\n"))}return n.join("\n")}function switch_types(e){p_obj=$(e).closest("td"),e.checked?($(".case1",p_obj).show(),$(".case1 input",p_obj).attr({disabled:!1}),$(".case0",p_obj).hide(),$(".case0 input",p_obj).attr({disabled:!0})):($(".case0",p_obj).show(),$(".case0 input",p_obj).attr({disabled:!1}),$(".case1",p_obj).hide(),$(".case1 input",p_obj).attr({disabled:!0}))}function humanSize(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" Гб":e>=1e6?(e/1e6).toFixed(2)+" Мб":e>=1024?(e/1e3).toFixed(2)+" Кб":e+" б"}function addExtendet(){function e(e){var t;t=1==$("#VoteAddQuestions input:radio[name=visible]:checked").val()?"Да":"Нет";var i='<tr id="tr_'+e+'">';i+="<td>",i+='<input name="parent_id_'+e+'" id="parent_id_'+e+'" value="2" type="hidden">',i+='<input name="id_'+e+'" id="id_'+e+'" value="'+e+'" type="hidden">',i+='<div id="title_'+e+'"><b>'+$("#title").attr("value")+"</b></div>",i+='<div id="title_i_'+e+'" style="display: none;">',i+='<input name="title_'+e+'" value="'+$("#title").attr("value")+'" class="bord padd w100" id="title_input_'+e+'" type="text">',i+='<p align="right">',i+='<a href="javascript:;" onclick="saveExtendet(\''+e+"');\">Сохранить</a> | ",i+='<a href="javascript:;" onclick="cancelExtendet(\''+e+"');\">Отмена</a> ",i+="</p>",i+="</div>",i+="</td>",i+="<td>",i+='<div id="ord_'+e+'"><b>'+$("#ord").attr("value")+"</b></div>",i+='<div id="ord_i_'+e+'" style="display: none;">',i+='<input name="ord_'+e+'" value="'+$("#ord").attr("value")+'" style="width: 100%;" class="bord padd w100" id="ord_input_'+e+'" type="text">',i+="</div>",i+="</td>",i+='<td align="center">',i+='<div id="visible_'+e+'"><b>'+t+"</b></div>",i+='<div id="visible_i_'+e+'" style="display: none;">',i+='<input name="visible_'+e+'" value="1" checked="checked" onclick="$(\'#vis_'+e+"').val('1');\" id=\"visible_input_"+e+'_1" type="radio">Да &nbsp;&nbsp;',i+='<input name="visible_'+e+'" value="0" onclick="$(\'#vis_'+e+"').val('0');\" id=\"visible_input_"+e+'_0" type="radio">Нет',i+='<input name="vis_'+e+'" id="vis_'+e+'" value="" type="hidden">',i+="</div>",i+="</td>",i+="<td>",i+='<a href="#" class="icon icon-edit" onclick="editExtendet(\''+e+"')\"></a>",i+='<a href="#" class="icon icon-delete remove-trigger" onClick="delExtendet(\''+e+"')\"></a>",i+="</td>",i+="</tr>",$(i).insertBefore("#ajax_add_form"),$("#title").attr({value:""}),$("#ord").attr({value:""}),$("#ajax_add_form").hide()}$.post("/"+ADMIN_DIR+"/ajax/vote/",{action:$("#action").attr("value"),id:$("#id").attr("value"),title:$("#title").attr("value"),ord:$("#ord").attr("value"),visible:$("#VoteAddQuestions input:radio[name=visible]:checked").val()},e)}function saveExtendet(e){function t(t){var i;i=1==$("#vis_"+e).val()?"Да":"Нет",$("#title_"+e).html("<b>"+$("#title_input_"+e).attr("value")+"</b>"),$("#ord_"+e).html($("#ord_input_"+e).attr("value")),$("#visible_"+e).html(i),$("#title_"+e).show(),$("#ord_"+e).show(),$("#visible_"+e).show(),$("#title_i_"+e).hide(),$("#ord_i_"+e).hide(),$("#visible_i_"+e).hide()}$.post("/"+ADMIN_DIR+"/ajax/vote/",{action:"update",id:$("#id_"+e).attr("value"),parent_id:$("#parent_id_"+e).attr("value"),title:$("#title_input_"+e).attr("value"),ord:$("#ord_input_"+e).attr("value"),visible:$("#VoteAddQuestions input:radio[name=visible_"+e+"]:checked").val()},t)}function editExtendet(e){$("#title_"+e).hide(),$("#ord_"+e).hide(),$("#visible_"+e).hide(),$("#title_i_"+e).show(),$("#ord_i_"+e).show(),$("#visible_i_"+e).show()}function delExtendet(e){cp.dialog("Вы действительно хотите удалить запись?")&&$.post("/"+ADMIN_DIR+"/ajax/vote/",{action:"del",id:$("#id_"+e).val()},onAjaxSuccessDel)}function onAjaxSuccessDel(e){$("#tr_"+e).remove()}function cancelExtendet(e){$("#title_"+e).show(),$("#ord_"+e).show(),$("#visible_"+e).show(),$("#title_i_"+e).hide(),$("#ord_i_"+e).hide(),$("#visible_i_"+e).hide()}function onAjaxSuccess(e){alert(e)}function editTitle(e,t){if("undefined"==typeof t)var t=$("#ftitle_"+e).text();var i=prompt("Введите новое имя",t);return""!=i&&i!=t&&null!==i&&$.ajax({url:"/"+ADMIN_DIR+"/meta/filename",type:"post",data:{id:e,name:i},dataType:"JSON",success:function(t){t.status===!0&&$("#ftitle_"+e).html(i)}}),!1}function editVisible(e,t){return t=1==t?0:1,$.ajax({url:"/"+ADMIN_DIR+"/meta/filevisible",type:"post",data:{id:e,visible:t},dataType:"JSON",success:function(i){i.status===!0&&($("#fvisible_"+e).removeClass("icon-eye icon-eye-off"),1==t?$("#fvisible_"+e).addClass("icon-eye"):$("#fvisible_"+e).addClass("icon-eye-off"))}}),!1}function editOrd(e,t){return neword=prompt("Порядок",t),neword?(""!=neword&&neword!=t&&$.post("/"+ADMIN_DIR+"/ajax/meta/",{action:"newfileord",neword:neword,id:e},function(t){1==t&&$("#ordfile_"+e).html(neword)}),!1):!1}function ajax_vis_toggle(e,t,i){return $(e).append('<i class="loading"></i>'),$.post("/"+ADMIN_DIR+"/ajax/structure/",{act:"toggle_visible",mod_id:i,id:t},function(t){1==t&&$(e).toggleClass("icon-eye").toggleClass("icon-eye-off").html("")}),!1}function show_tooltips(e){$("#"+e).toggle()}function my_uncheck(){$(".access").each(function(){$(this).attr({checked:""})})}function setModuleLimit(e,t){value=parseInt($(e).val()),value>0&&(setCookie("modulePager_"+t,value),location.href=location.href)}function setModuleSort(e,t,i){cn="moduleSort",value=$(e).val();var n=getCookie(cn);if(n){var o=new Array;if(s=unserialize(n),void 0==s[t]){var o=new Array;o[i]=value,s[t]=o}else void 0==s[t][i]?s[t][i]=value:s[t][i]=value;setCookie(cn,serialize(s))}else{var o=new Array,s=new Array;s[i]=value,o[t]=s,setCookie(cn,serialize(o))}location.href=location.href}function CheckAndSubmit(e){var t=!0;return $("#"+e+" .ness").each(function(){return""==$(this).val()?($(this).focus().addClass("error"),t=!1,!1):void $(this).removeClass("error")}),t?void $("#"+e).submit():!1}function setSort(e,t){value=$(e).val(),setCookie(t,value),location.href=location.href}function form_submit(e,t){"save"==t&&$("#"+e).submit(),"apply"==t?$("#"+e).submit():$("#"+e).submit()}function openwin(e,t,i,n){null!=hwnd&&hwnd.close(),hwnd=window.open(e,"","toolbar=no , location=no , directories=no , resizable=no , width="+t+" , height="+i),hwnd.document.open(),hwnd.document.write("<html>"),hwnd.document.write("<head>"),hwnd.document.write("<title>"+n+"</title>"),hwnd.document.write("</head>"),hwnd.document.write("<body bgcolor=#ffffff bottommargin=0 leftmargin=0 marginheight=0 marginwidth=0 rightmargin=0 topmargin=0 style='border:0px;'>"),hwnd.document.write("<table align=center width=100% height=100% cellspacing=0 cellpadding=0 border=0>"),hwnd.document.write("<tr><td><img src='"+e+"' border=0></td></tr>"),hwnd.document.write("</table></body></html>"),hwnd.document.close()}function openwin_text(e,t,i){window.open(e,"","toolbar=no , location=no , directories=no , resizable=no , scrollbars=no , width="+t+" , height="+i)}function ltrim(e){for(var t=0;t<e.length&&isWhitespace(e.charAt(t));t++);return e.substring(t,e.length)}function rtrim(e){for(var t=e.length-1;t>=0&&isWhitespace(e.charAt(t));t--);return e.substring(0,t+1)}function trim(e){return e=e.replace(/\s{2,}/g," "),ltrim(rtrim(e))}function isWhitespace(e){var t=" 	\n\r\f";return-1!=t.indexOf(e)}function binding(e,t){$("body").on("keyup keypress",'input[name="'+e+'"]',function(){""!==this.value&&$('input[name="'+t+'"]').val(transliterate(this.value,URL_TRANSLATE))})}function transliterate(e,t){if(e=trim(e.toLowerCase()),""!=e){var i,n={},o=[],s="";if(n={"à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","ş":"s","ı":"i","ç":"c","ü":"u","ö":"o","ğ":"g","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sch","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","є":"ye","і":"i","ї":"yi","ґ":"g","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z"},s=e.replace(RegExp("[^a-zа-я0-9] + ","ig"),"-"),"cyrillic"==t)s=decodeURIComponent(s);else if("translate"==t)s=s.replace(RegExp(i,"g"),n[i]);else for(i in n)s=s.replace(RegExp(i,"g"),n[i]);o=s.split(""),"-"==o[0]&&(s=s.slice(1)),"-"==o[o.length-1]&&(s=s.slice(0,-1)),e=s}return e}function redouble(e){return e=e.replace("__","_"),e=e.replace("_-_","_"),e=e.replace("--","-"),e.indexOf("__")>-1?redouble(e):("_"==e.substr(0,1)&&e.length>1&&(e=e.substr(1,e.length)),e)}function ajax_toggle_group(e,t){var i=0;return i=$(e).hasClass("icon-eye-off")?1:0,$(e).append('<i class="loading"></i>'),$.post("/"+ADMIN_DIR+"/ajax/modules/",{action:"devisible",id:t,visible:i},function(t){1==t&&($(e).hasClass("icon-eye-off")?$(e).removeClass("icon-eye-off").addClass("icon-eye").html(""):$(e).removeClass("icon-eye").addClass("icon-eye-off").html(""))}),!1}function toggle_menu(e,t){$(e).toggleClass("minus").toggleClass("plus").parent(),$("#item"+t).toggle()}function toggle_small_photo(e){$("#"+e).toggle()}function hideField(e){title=$("#docs_"+e+" .title_in").val(),ord=$("#docs_"+e+" .ord_in").val(),$("#docs_"+e+" .title_f").empty().append(title),$("#docs_"+e+" .ord_f").empty().append(ord),$("#docs_"+e+" .but_save").hide(),$("#docs_"+e+" .ctr_edit").show()}function EditDocs(e){return $("#docs_"+e+" .but_save").show(),$("#docs_"+e+" .ctr_edit").hide(),curr_value=$("#docs_"+e+" .title_f").text(),$("#docs_"+e+" .title_f").empty().append("<input type='text' value='"+curr_value+"' name='title' class='bord padd w100 title_in' />"),curr_value=$("#docs_"+e+" .ord_f").text(),$("#docs_"+e+" .ord_f").empty().append("<input type='text' value='"+curr_value+"' name='ord' class='bord padd w20 ord_in' />"),$("#docs_"+e+" .title_in").focus(),!1}function SaveDocs(e){return title=$("#docs_"+e+" .title_in").val(),ord=$("#docs_"+e+" .ord_in").val(),title||(alert("Пустое имя документа"),hideField(e)),$.post("/"+ADMIN_DIR+"/ajax/document/",{id:"document_edit",docsid:e,title:title,ord:ord},function(t){alert("Данные обновлены"),hideField(e)}),!1}function DelDocs(e){return cp.dialog("Вы действительно хотите удалить?")&&$.post("/"+ADMIN_DIR+"/ajax/document/",{id:"document_del",docsid:e},function(t){t>0?$("#docs_"+e).hide():alert("ошибка обновления")}),!1}function page_update(item_id){return $.post("/"+ADMIN_DIR+"/ajax/document/",{id:"update",post_id:item_id},function(data){var json=eval("("+data+")");parseMsg(json,"file_docs")}),!1}function parseMsg(e,t){$("#"+t+" .uploadfiles").empty(),$("#"+t+" input:file").attr({value:""}),str='<table style="margin-bottom:10px;width:80%"><tr>\n<td class="h w100">Документ</td>\n<td class="h">Размер</td>\n<td class="h">Удалить</td></tr>\n';var i=0;$.each(e,function(e,n){i%2!=0?odd="odd ":odd="",str+='<tr>\n<td class="'+odd+'"><a href="'+n.sys_name+'" title="" target="_blank">'+n.title+"</a></td>\n",str+='<td class="'+odd+'r"> '+n.size+"</td>\n",str+='<td class="actions"><a href="#" onclick="return cp.ajaxFileDelete('+n.id+",'"+t+'\');" class="ctr_a ctr_del margin" title="Удалить" onclick="return confirm(\'Вы действительно хотите удалить?\')"></a></td>\n</tr>\n',i++}),str+="</table>",$("#"+t+" .uploadfiles").append(str)}function ajaxFileDocsUpload(e){}function screening(e){var t=/"/g,i=e.replace(t,"&quot;");return i}function _addslashes(e){return e.replace("/([\"'])/g","\\$1").replace("/\x00/g","\\0")}function _stripslashes(e){return e.replace("/\x00/g","0").replace("/(.)/g","$1")}function clearCookie(){var e=new Date,t=new Date(e.getTime()-864e5);this.setCookie("co"+this.obj,"cookieValue",t),this.setCookie("cs"+this.obj,"cookieValue",t)}function setCookie(e,t,i,n,o,s){document.cookie=escape(e)+"="+escape(t)+(i?"; expires="+i.toGMTString():"")+(n?"; path="+n:"")+(o?"; domain="+o:"")+(s?"; secure":"")}function getCookie(e){var t="",i=document.cookie.indexOf(escape(e)+"=");if(-1!=i){var n=i+(escape(e)+"=").length,o=document.cookie.indexOf(";",n);t=-1!=o?unescape(document.cookie.substring(n,o)):unescape(document.cookie.substring(n))}return t}function serialize(e){var t,i=function(e){var t,i,n=typeof e;if("object"==n&&!e)return"null";if("object"==n){if(!e.constructor)return"object";var o=e.constructor.toString();t=o.match(/(\w+)\(/),t&&(o=t[1].toLowerCase());var s=["boolean","number","string","array"];for(i in s)if(o==s[i]){n=s[i];break}}return n},n=i(e),o="";switch(n){case"function":t="";break;case"boolean":t="b:"+(e?"1":"0");break;case"number":t=(Math.round(e)==e?"i":"d")+":"+e;break;case"string":t="s:"+encodeURIComponent(e).replace(/%../g,"x").length+':"'+e+'"';break;case"array":case"object":t="a";var s,r,a=0,l="";for(r in e)o=i(e[r]),"function"!=o&&(s=r.match(/^[0-9]+$/)?parseInt(r,10):r,l+=this.serialize(s)+this.serialize(e[r]),a++);t+=":"+a+":{"+l+"}";break;case"undefined":default:t="N"}return"object"!=n&&"array"!=n&&(t+=";"),t}function unserialize(e){var t=function(e,t,i,n){throw new this.window[e](t,i,n)},i=function(e,i,n){for(var o=[],s=e.slice(i,i+1),r=2;s!=n;)r+i>e.length&&t("Error","Invalid"),o.push(s),s=e.slice(i+(r-1),i+r),r+=1;return[o.length,o.join("")]},n=function(e,t,i){var n;n=[];for(var o=0;i>o;o++){var s=e.slice(t+(o-1),t+o);n.push(s);
}return[n.length,n.join("")]},o=function(e,s){var r,a,l,c,d,u,h=0;s||(s=0);var p=e.slice(s,s+1).toLowerCase(),f=s+2,m=new Function("x","return x");switch(p){case"i":m=function(e){return parseInt(e,10)},a=i(e,f,";"),h=a[0],r=a[1],f+=h+1;break;case"b":m=function(e){return 0!==parseInt(e,10)},a=i(e,f,";"),h=a[0],r=a[1],f+=h+1;break;case"d":m=function(e){return parseFloat(e)},a=i(e,f,";"),h=a[0],r=a[1],f+=h+1;break;case"n":r=null;break;case"s":l=i(e,f,":"),h=l[0],c=l[1],f+=h+2,a=n(e,f+1,parseInt(c,10)),h=a[0],r=a[1],f+=h+2,h!=parseInt(c,10)&&h!=r.length&&t("SyntaxError","String length mismatch");break;case"a":r={},d=i(e,f,":"),h=d[0],u=d[1],f+=h+2;for(var g=0;g<parseInt(u,10);g++){var v=o(e,f),y=v[1],b=v[2];f+=y;var w=o(e,f),_=w[1],k=w[2];f+=_,r[b]=k}f+=1;break;default:t("SyntaxError","Unknown / Unhandled data type(s): "+p)}return[p,f-s,m(r)]};return o(e+"",0)[2]}function __debug(e,t){var i="";t||(t=0);for(var n="",o=0;t+1>o;o++)n+="    ";if("object"==typeof e)for(var s in e){var r=e[s];"object"==typeof r?(i+=n+"'"+s+"' ...\n",i+=dump(r,t+1)):i+=n+"'"+s+"' => \""+r+'"\n'}else i="===>"+e+"<===("+typeof e+")";return i}function keyControls(){$("body").on("click",".remove-trigger",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var t=this,i=$(t).attr("href");return $.post(i,function(){cp.notify("Удалено","info"),"undefined"!=typeof $(t).attr("rel")&&$($(t).attr("rel")).length>0?$($(t).attr("rel")).remove():$(t).closest("tr").remove()}),!1}),$("body").on("click",".js-remove-item",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var t=this,i=$(t).attr("href");return $.post(i,function(){cp.notify("Удалено","info"),"undefined"!=typeof $(t).attr("rel")&&$($(t).attr("rel")).length>0?$($(t).attr("rel")).remove():$(t).closest("tr").remove()}),!1}),$("body").on("click",".js-add-template",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var t=$(this).closest(".js-template-wrapper"),i=parseInt($(this).data("iteration")),n=$(this).data("template"),o={};"undefined"!=typeof i&&(o.id=i,i+=-1,$(this).data("iteration",i)),t.append(template(n,o))}),$("body").on("keydown",".reducing-trigger",function(e){if(38==e.which||40==e.which){e.preventDefault();var t=$(this).data("reducing")||10,i=$(this).data("format"),n=parseInt($(this).val())||0,o=0;38==e.which?o=n+t:40==e.which&&(o=n-t),0>o&&(o=0),"undefined"!=typeof i&&(o="?i%".replace("?i",o)),$(this).val(o)}}),$("body").on("keypress",".latin",function(e){var t=/[^A-Za-z]/g;return t.test(String.fromCharCode(e.keyCode))?!1:void 0}),$("body").on("keypress",".integer",function(e){return[0,8,13,38,40].indexOf(e.which)<0&&(e.which<48||e.which>57)?!1:void 0}),$("body").on("keypress",".float",function(e){return[0,8,13,38,40,44,46].indexOf(e.which)<0&&(e.which<48||e.which>57)?!1:void 0})}function fileManager(){}function on_load(){if(fileManager(),$(".watch-datemask").mask("99/99/9999"),$(".watch-phonemask").mask("+ 7 (999) 999-99-99"),$(".watch-cartnumber").mask("999-999-999"),$("body").on("click",".js-size-delete",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,$(this).closest("tr").remove()}),$("body").on("click",".js-add-size",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var t=$(this).closest(".js-size-list").find("table").find("tbody"),i=parseInt($(this).data("iteration")),n=0;t.find("tr").each(function(){parseInt($(this).data("index"))>n&&(n=parseInt($(this).data("index")))}),n++,t.append(template("tpl_image_row",{index:n,button:!0,iteration:i}))}),$(".js-table-toggle").length&&($(".js-table-toggle").on("click",function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t?cp.tableToggle($(this).data("toggle")):cp.tableToggle($(this).data("toggle"),e)}),$('.js-table-toggle[data-toggle-init="true"]').length&&$('.js-table-toggle[data-toggle-init="true"]').trigger("click",!0)),$(".js-slider").length&&$(".js-slider").each(function(){var e=$(this).attr("id"),t=$(this).data("type"),i=$(this).data("value"),n=$(this).data("min"),o=$(this).data("max");slider(e,t,i,n,o)}),$(".js-map").length&&$(".js-map").each(function(){var e=$(this).data("element"),t=$(this).data("provider");mapConteiner(t,e)}),$(".js-redactor").length&&$(".js-redactor").each(function(){var e=$(this).attr("id"),t=$(this).data("redactor");_redactor.init(e,t)}),$(".js-editor").length&&$(".js-editor").each(function(){var e=$(this).attr("id"),t=$(this).data("editor"),i=$(this).data("hightlight");_editor.init(e,t,i)}),$(".js-fileupload").length&&$.upload.init(),$("body").on("mouseenter",".js-structure-controll",function(e){$(this).find(".structure__control.animate").removeClass("animate")}),$("body").on("mouseleave",".js-structure-controll",function(e){$(this).find(".structure__control").addClass("animate")}),$("body").on("click",".menu-trigger",function(e){e.preventDefault(),$("#page").toggleClass("page-open");var t="visible";return $("#page").hasClass("page-open")||(t="hidden"),$("#overlay").css({visibility:t}),!1}),$("#meta_data").sortable({handle:".js-trigger-drag",pullPlaceholder:!1,bodyClass:"dragging",draggedClass:"dragged",containerSelector:"table",itemPath:"> tbody",itemSelector:"tr",placeholder:'<tr class="placeholder"/>',onDrop:function(e,t,i,n){e.removeClass("dragged").removeAttr("style"),$("body").removeClass("dragging")}}),$("body").on("mouseenter",".trigger-navigation",function(e){var t,i=$(this),n=$("#page"),o=i.attr("rel"),s="tooltip-"+i.attr("id");if(o&&!$("#"+s).length&&!n.hasClass("page-open")){var r=i.offset().top+10;t=document.createElement("span"),t.id=s,t.innerHTML=o,t.className="navigation__tooltip navigation__tooltip_animate",t.style.top=r+"px",n.append(t),setTimeout(function(){$(t).removeClass("navigation__tooltip_animate")},30)}}),$("body").on("mouseleave",".trigger-navigation",function(e){var t="tooltip-"+$(this).attr("id");if($("#"+t).length){var i=$("#"+t);i.addClass("navigation__tooltip_animate"),setTimeout(function(){i.remove()},200)}}),$("body").on("click",".wrapper",function(e){$("#page").removeClass("page-open"),$("#overlay").css({visibility:"hidden"})}),$("body").on("mouseenter",".trigger-tooltip",function(e){$(this).data("xtitle",$(this).prop("title")),$(this).prop("title","")}),$("body").on("mouseleave",".trigger-tooltip",function(e){$(this).prop("title",$(this).data("xtitle")),$(this).data("xtitle","")}),$(".trigger-popover").popover(),$(".nestable-tree").length){var e=$(".nestable-tree").eq(0);if("undefined"!=typeof e.data("path")&&"undefined"!=typeof e.data("group")){var t=e.data("path"),i=parseInt(e.data("group"));e.nestable({group:i,maxDepth:20,dragStop:function(e){var n,o,s;s=0,n=parseInt(e[0].id.split("-")[1]),o=parseInt(e[0].offsetParent.offsetParent.id.split("-")[1]),isNaN(o)&&(o=i),null!==e[0].nextElementSibling&&(s=parseInt(e[0].nextElementSibling.id.split("-")[1])),isNaN(n)||isNaN(o)||$.ajax({url:"/"+ADMIN_DIR+"/"+t+"/updateStructure",type:"post",data:{oid:n,pid:o,nid:s}})},afterExpand:function(e){var i=e[0].id.split("-")[1];$.removeCookie(t+"_collapse_"+i,{path:"/"})},afterCollapse:function(e){var i=e[0].id.split("-")[1];$.cookie(t+"_collapse_"+i,"1",{expires:30,path:"/"})}})}}}function doOnLoad(e){category=new dhtmlXTreeObject("treeboxbox_tree","100%","100%",0),category.setImagePath("/"+ADMIN_DIR+"/images/tree/"),category.enableDragAndDrop(!0),category.setEditStartAction(!0/!1),category.enableKeyboardNavigation(!0),category.enableMultiselection(!0),category.enableTreeLines(!0),category.makeAllDraggable(),category.attachEvent("onDrop",function(t,i,n,o,s){$.ajax({url:"/"+ADMIN_DIR+"/"+e+"/updateStructure",type:"post",data:{oid:t,pid:i}})}),category.attachEvent("onDblClick",function(e){})}function controlLink(e,t,i,n,o){switch(i){case"add":return'<a href="/'+ADMIN_DIR+"/"+e+"/"+t+"/add/"+n+'" class="control-icon icon icon-file-plus" title="Добавить подраздел" data-no-instant></a>';case"edit":return'<a href="/'+ADMIN_DIR+"/"+e+"/"+t+"/edit/"+n+'" class="control-icon icon icon-edit" title="Редактировать раздел" data-no-instant></a>';case"visible":return'<a href="/'+ADMIN_DIR+"/"+e+"/"+t+"/visible/"+n+'" class="control-icon icon icon-eye'+(0==o?"-off":"")+'" onclick="ajax_vis_toggle(this, 15, 0); return false;" title="Отображение страницы" data-no-instant></a>';case"delete":return'<a href="/'+ADMIN_DIR+"/"+e+"/"+t+"/del/"+n+'" class="control-icon icon icon-delete" title="Удалить раздел" onclick="return cp.dialog(\'Вы действительно хотите удалить раздел?\');" data-no-instant></a>'}}function buildTree(e,t){$.ajax({url:"/"+ADMIN_DIR+"/"+e+"/getStructure",type:"get",dataType:"JSON",success:function(i){if(category.deleteChildItems(0),i.length)for(var n in i)controls="",controls+='<span class="control-icons">',controls+=controlLink(e,t,"add",i[n].id),controls+=controlLink(e,t,"edit",i[n].id),controls+=controlLink(e,t,"visible",i[n].id,i[n].visible),controls+=controlLink(e,t,"delete",i[n].id),controls+="</span>",close=0,open=0,leaf=0,0==i[n].pid?(leaf="icon/home.svg",open="icon/home.svg",close="icon/home.svg"):1==i[n].dynamic?leaf="icon/application-code.svg":leaf="icon/file.svg",category.insertNewChild(i[n].pid,i[n].id,i[n].name+" "+controls,0,leaf,open,close);category.openOnItemAdding(!0)}})}var shuffle=function(e){return e.sort(function(){return Math.random()-.5})},getAbsoluteUrl=function(){var e;return function(t){return e||(e=document.createElement("a")),e.href=t,e.href}}();!function(e){"use strict";window.body=e("body"),e.app={translate_api:null,binding:function(){var e;for(e in this)"object"==typeof this[e]&&"function"==typeof this[e].bind&&this[e].bind()},init:function(){"undefined"!=typeof TRANSLATE_API&&""!==TRANSLATE_API&&(this.translate_api=TRANSLATE_API),this.binding()}}}(jQuery),function(e){"use strict";e.app=e.app=e.app||{},e.app.plugins={bind:function(){e(".js-datetimepicker").length&&e(".js-datetimepicker").datetimepicker({language:"ru",autoclose:!0,todayBtn:!0}).on("changeDate",function(e){})}}}(jQuery),function(e){var t,i=null;e.app=e.app=e.app||{},e.app.transliterate={_temp:"",_format:"latin",_string:"",_chars:{"à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","ş":"s","ı":"i","ç":"c","ü":"u","ö":"o","ğ":"g","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sch","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","є":"ye","ґ":"g","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z"},_translate_url:function(){return["https://translate.yandex.net/api/v1.5/tr.json/translate?key=",e.app.translate_api,"&text=",i._string,"&lang=ru-en"].join("")},_trim:function(t){return e.trim(t)},_clean:function(){this._string=this._string.replace(RegExp("[^a-zа-я0-9]+","ig"),"-").toLowerCase()},_produce:{cyrillic:function(e){i._string=decodeURIComponent(i._string)},translate:function(t){e.ajax({url:i._translate_url(),type:"get",contentType:!1,processData:!0,success:function(e){"undefined"!=typeof e.text[0]&&(i._string=e.text[0],i._clean(),i._beautify(),t.val(i._string))},error:function(e){this._produce.latin()},dataType:"JSON"})},latin:function(e){for(t in i._chars)i._string=i._string.replace(RegExp(t,"g"),i._chars[t])}},_beautify:function(){this._temp=this._string.split(""),"-"==this._temp[0]&&(this._string=this._string.slice(1)),"-"==this._temp[this._temp.length-1]&&(this._string=this._string.slice(0,-1))},get:function(e,t,n){i=this,this._format=n,this._string=i._trim(t),this._clean(),this._produce[this._format](e),"translate"!==this._format&&(this._beautify(),e.val(i._string))},initBinding:function(){if(e(".js-binding").length){var t="",i="";e(".js-binding").each(function(){e(this).hasClass("js-binding-init")||(t=e(this).data("binding-name"),i=e('input[name="'+e(this).data("binding-element")+'"]'),body.on("keyup blur",'input[name="'+t+'"]',function(){console.log("read ",i.prop("readonly")),""===e.trim(this.value)||i.prop("readonly")||e.app.transliterate.get(i,this.value,URL_TRANSLATE)}))})}},initSwitcher:function(){body.on("click",".js-toggle-binding",function(t){t.preventDefault(),e(e(this).data("element")).length&&(e(this).hasClass("on")?(e(e(this).data("element")).prop("readonly",!0),e(this).removeClass("on")):(e(this).addClass("on"),e(e(this).data("element")).prop("readonly",!1),e.app.transliterate.get(e(e(this).data("element")),e('input[name="'+e(e(this).data("element")).data("binding-name")+'"]').val(),URL_TRANSLATE)))})},bind:function(){this.initBinding(),this.initSwitcher()}}}(jQuery),function(e){"use strict";e.app=e.app=e.app||{},e.app.trigger={structure:function(){var t;body.on("click",".js-structure-button",function(i){i.preventDefault(),t=e(this).closest(".js-structure"),t.find(".js-structure-text").hide(),t.find(".js-structure-input").show(),e(this).hide()})},bind:function(){this.structure()}}}(jQuery),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){var e;return function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};e[r][0].call(d.exports,function(t){var i=e[r][1][t];return o(i?i:t)},d,d.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){var n=e("matches-selector");t.exports=function(e,t,i){for(var o=i?e:e.parentNode;o&&o!==document;){if(n(o,t))return o;o=o.parentNode}}},{"matches-selector":5}],2:[function(e,t,i){function n(e,t,i,n,s){var r=o.apply(this,arguments);return e.addEventListener(i,r,s),{destroy:function(){e.removeEventListener(i,r,s)}}}function o(e,t,i,n){return function(i){i.delegateTarget=s(i.target,t,!0),i.delegateTarget&&n.call(e,i)}}var s=e("closest");t.exports=n},{closest:1}],3:[function(e,t,i){i.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},i.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||i.node(e[0]))},i.string=function(e){return"string"==typeof e||e instanceof String},i.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},{}],4:[function(e,t,i){function n(e,t,i){if(!e&&!t&&!i)throw new Error("Missing required arguments");if(!a.string(t))throw new TypeError("Second argument must be a String");if(!a.fn(i))throw new TypeError("Third argument must be a Function");if(a.node(e))return o(e,t,i);if(a.nodeList(e))return s(e,t,i);if(a.string(e))return r(e,t,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,i){return e.addEventListener(t,i),{destroy:function(){e.removeEventListener(t,i)}}}function s(e,t,i){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,i)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,i)})}}}function r(e,t,i){return l(document.body,e,t,i)}var a=e("./is"),l=e("delegate");t.exports=n},{"./is":3,delegate:2}],5:[function(e,t,i){function n(e,t){if(s)return s.call(e,t);for(var i=e.parentNode.querySelectorAll(t),n=0;n<i.length;++n)if(i[n]==e)return!0;return!1}var o=Element.prototype,s=o.matchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;t.exports=n},{}],6:[function(e,t,i){function n(e){var t;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),n=document.createRange();n.selectNodeContents(e),i.removeAllRanges(),i.addRange(n),t=i.toString()}return t}t.exports=n},{}],7:[function(e,t,i){function n(){}n.prototype={on:function(e,t,i){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:i}),this},once:function(e,t,i){function n(){o.off(e,n),t.apply(i,arguments)}var o=this;return n._=t,this.on(e,n,i)},emit:function(e){var t=[].slice.call(arguments,1),i=((this.e||(this.e={}))[e]||[]).slice(),n=0,o=i.length;for(n;o>n;n++)i[n].fn.apply(i[n].ctx,t);return this},off:function(e,t){var i=this.e||(this.e={}),n=i[e],o=[];if(n&&t)for(var s=0,r=n.length;r>s;s++)n[s].fn!==t&&n[s].fn._!==t&&o.push(n[s]);return o.length?i[e]=o:delete i[e],this}},t.exports=n},{}],8:[function(t,i,n){!function(o,s){if("function"==typeof e&&e.amd)e(["module","select"],s);else if("undefined"!=typeof n)s(i,t("select"));else{var r={exports:{}};s(r,o.select),o.clipboardAction=r.exports}}(this,function(e,t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=i(t),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return e.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""},e.prototype.initSelection=function(){this.text?this.selectFake():this.target&&this.selectTarget()},e.prototype.selectFake=function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return e.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="fixed",this.fakeElem.style[t?"right":"left"]="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,o["default"])(this.fakeElem),this.copyText()},e.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},e.prototype.selectTarget=function(){this.selectedText=(0,o["default"])(this.target),this.copyText()},e.prototype.copyText=function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)},e.prototype.handleResult=function(e){e?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},e.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},e.prototype.destroy=function(){this.removeFake()},r(e,[{key:"action",set:function(){var e=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==("undefined"==typeof e?"undefined":s(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=a})},{select:6}],9:[function(t,i,n){!function(o,s){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],s);else if("undefined"!=typeof n)s(i,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var r={exports:{}};s(r,o.clipboardAction,o.tinyEmitter,o.goodListener),o.clipboard=r.exports}}(this,function(e,t,i,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var i="data-clipboard-"+e;return t.hasAttribute(i)?t.getAttribute(i):void 0}var c=o(t),d=o(i),u=o(n),h=function(e){function t(i,n){s(this,t);var o=r(this,e.call(this));return o.resolveOptions(n),o.listenClick(i),o}return a(t,e),t.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText},t.prototype.listenClick=function(e){var t=this;this.listener=(0,u["default"])(e,"click",function(e){return t.onClick(e)})},t.prototype.onClick=function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c["default"]({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})},t.prototype.defaultAction=function(e){return l("action",e)},t.prototype.defaultTarget=function(e){var t=l("target",e);return t?document.querySelector(t):void 0},t.prototype.defaultText=function(e){return l("text",e)},t.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},t}(d["default"]);e.exports=h})},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)});var cp=function(e){var t,i,n=[];return{ajaxFileDelete:function(t,i){return cp.dialog("Вы дейсвительно хотите удалить файл?")&&e.ajax({url:"/"+ADMIN_DIR+"/meta/filedelete",type:"post",data:{id:t},dataType:"JSON",success:function(t){console.log(t),t.status===!0&&e("#"+i).remove()}}),!1},dropdown:function(){e(".trigger-dropdown").on("click",function(){var t=e(this).data("toggle");e("#dropdown-"+t).toggle()})},cleditor:function(){"undefined"!=typeof jQuery.cleditor&&e(".redactor_cleditor").cleditor()},notify:function(n,o){clearTimeout(t),e("body").find(".notify-message").length||(i=e('<div class="notify notify-message">'+n+"</div>"),e("body").append(i),setTimeout(function(){i.addClass("animate")},10)),t=setTimeout(function(){i.removeClass("animate"),setTimeout(function(){i.remove()},300)},2500)},fileChange:function(t){var i=t.value;if(i.lastIndexOf("\\"))var n=i.lastIndexOf("\\")+1;else var n=i.lastIndexOf("/")+1;i=i.slice(n),e(t).closest(".file--upload").find(".file--upload-placehoder").html(i)},binding:function(t,i){e('input[name="'+t+'"]').on("keyup",function(){""!=this.value&&e('input[name="'+i+'"]').val(transliterate(this.value,URL_TRANSLATE))})},saveSettings:function(t,i){"undefined"!=typeof i&&(i.preventDefault?i.preventDefault():i.returnValue=!1);var n={},o="#settings-container-toggle-"+t;return e(o).find("input, select").each(function(){var t=e(this).attr("type"),i=e(this).attr("name"),o=e(this).val();"undefined"!=typeof i&&("radio"!==t&&"checkbox"!==t||e(this).is(":checked")===!0)&&(i=i.replace("SETTINGS_",""),n[i]=o)}),e.post("/"+ADMIN_DIR+"/structure/saveSettings/",{arr:n},function(e){1==e.result&&cp.notify("Сохранено","success")},"JSON"),!1},removeSettings:function(t,i){return"undefined"!=typeof i&&(i.preventDefault?i.preventDefault():i.returnValue=!1),cp.dialog("Вы дейсвительно хотите удалить блок?")&&e.post("/"+ADMIN_DIR+"/structure/removeSettings/",{id:t},function(i){1==i.result&&(e("#settings-"+t).remove(),e("#breadcrumbs-"+t).remove(),e("#container-"+t).remove(),e("#emptysplash-"+t).remove())},"JSON"),!1},arrLength:function(e){var t=0;for(var i in e)e.hasOwnProperty(i)&&t++;return t},loadSettings:function(t,i,n){var o,s={1:"type",2:"item",3:"mode"},r="",a="",l=1;"type"==n?(l=1,r=t):"item"==n?(l=2,r=e("#cnt_"+s[1]+"-"+i).find("option:selected").val(),a=t):"mode"==n&&(l=3,r=e("#cnt_"+s[2]+"-"+i).find("option:selected").val(),a=t),o=l+1;for(var c=o;4>=c;c++)e("#block-lvl"+c+"-"+i).length>0&&e("#block-lvl"+c+"-"+i).remove();e.post("/"+ADMIN_DIR+"/structure/loadSettings/",{action:r,mode:a},function(t){if("undefined"!=typeof t&&cp.arrLength(t)>0){var n=[],r="cnt_"+s[o]+"-"+i;n.push('<div class="block-settings-select-block lvl'+o+'" id="block-lvl'+o+"-"+i+'">'),n.push('<select name="SETTINGS_'+s[o]+"_"+i+'" id="'+r+'" onchange="cp.loadSettings(this.value, '+i+", '"+s[o]+"');\">"),n.push(' <option value="" selected>Выбрать</option>');for(system in t)n.push('<option value="'+system+'">'+t[system]+"</option>");n.push("</select>"),n.push("</div>"),e("#block-settings-select-block-"+i).append(n.join("")),selectize("#"+r)}},"JSON")},toggleModule:function(t,i){"undefined"!=typeof i&&(i.preventDefault?i.preventDefault():i.returnValue=!1);var n=e(t).attr("href");return e(t).append('<i class="loading"></i>'),e.post(n,function(i){i.status===!0&&(e(t).hasClass("icon-eye-off")?e(t).removeClass("icon-eye-off").addClass("icon-eye").html(""):e(t).removeClass("icon-eye").addClass("icon-eye-off").html(""))},"JSON"),!1},toggleSettings:function(t,i){"undefined"!=typeof i&&(i.preventDefault?i.preventDefault():i.returnValue=!1);var n=e(t).attr("href").substr(1);return e(t).toggleClass("block-settings-open"),e("#"+n).toggle(),!1},tableToggle:function(t,i){"undefined"!=typeof i&&(i.preventDefault?i.preventDefault():i.returnValue=!1);var n=window.location.pathname.replace(/\//g,"|"),o=md5(n),s=t+"_toogle_"+o;return"undefined"==typeof i?"undefined"==typeof e.cookie(s)&&(e("#"+t+" th .table_hdr").removeClass("table_u").addClass("table_d"),e("#"+t+" tr:not(.th)").hide()):(e("#"+t+" th .table_hdr").toggleClass("table_u").toggleClass("table_d"),e("#"+t+" tr:not(.th)").toggle(),e("#"+t+" tr:not(.th)").is(":visible")?e.cookie(s,"show",{expires:30,path:"/"}):e.removeCookie(s,{path:"/"})),!1},tableToggleList:function(){var t=window.location.pathname.replace(/\//g,"|"),i=md5(t);e(".table-toggle-trigger").length>0&&e(".table-toggle-trigger").each(function(){var t=this.id,n=t+"_toogle_"+i;"undefined"!=typeof e.cookie(n)?(e("#"+t+" th .table_hdr").addClass("table_u").removeClass("table_d"),e("#"+t+" tr:not(.th)").show()):(e("#"+t+" th .table_hdr").removeClass("table_u").addClass("table_d"),e("#"+t+" tr:not(.th)").hide())})},addBlock:function(t,i){"undefined"!=typeof i&&(i.preventDefault?i.preventDefault():i.returnValue=!1);var n=10;if(e("#cont_data").find(".block-settings-order-input").length){var o=[];e("#cont_data").find(".block-settings-order-input").each(function(){o.push(e(this).find("input").val())}),o.length&&(n=o.max()+10)}return e.post("/"+ADMIN_DIR+"/structure/getNewId/",{parent:t,order:n},function(t){var i=['<tr id="settings-'+t+'">','<td class="settings-row">','<div class="settings-container clearfix">','<a href="#" onclick="return cp.removeSettings('+t+', event);" class="block-settings-link block-settings-remove"><i class="icon icon-delete"></i>Удалить блок</a>','<a href="#settings-container-toggle-'+t+'" onclick="return cp.toggleSettings(this, event);" class="block-settings-link block-settings-title block-settings-open">','<span class="block-settings-title-drop"><i class="icon icon-cog"></i></span>','<span class="block-settings-title-text">Настройки блока</span>',"</a>",'<div class="settings-container-toggle opened" id="settings-container-toggle-'+t+'">','<div class="block-settings-ln block-settings-visible clearfix">','<div class="option-group option-combo option-simple">','<label><input type="radio" name="SETTINGS_visible_'+t+'" value="1" checked="checked"><span class="option">Активен</span></label>','<label class="disallow"><input type="radio" name="SETTINGS_visible_'+t+'" value="0"><span class="option">Не активен</span></label>',"</div>","</div>",'<div class="block-settings-ln block-settings-order clearfix">','<div class="block-settings-order-input">','<input name="SETTINGS_ord_'+t+'" value="'+n+'" placeholder="Порядок">',"</div>","</div>",'<div class="block-settings-ln block-settings-select clearfix" id="block-settings-select-block-'+t+'">','<div class="block-settings-select-block lvl1" id="block-lvl1-'+t+'">','<select name="SETTINGS_type_'+t+'" id="cnt_type-'+t+'" onchange="cp.loadSettings(this.value, '+t+', \'type\');"><option value="" selected>Выбрать</option><option value="redactor">Визуальный редактор</option><option value="editor">Редактор кода</option><option value="module">Модуль</option><option value="zone">Зона</option><option value="block">Блок</option><option value="banner">Баннер</option><option value="search">Поиск</option></select>',"</div>","</div>",'<div class="block-settings-ln block-settings-system clearfix">','<div class="block-settings-system-input">','<input name="SETTINGS_system_'+t+'" value="" placeholder="Системное имя">',"</div>","</div>",'<div class="block-settings-buttons clearfix">','<a href="#" onclick="return cp.saveSettings('+t+', event);" class="button button-purple block-settings-save"><i class="icon icon-check-square"></i>Сохранить</a>',"</div>","</div>","</div>","</td>","</tr>"];e("#cont_data").find("tbody").append(i.join("")),selectize()}),!1},dialog:function(e){return confirm(e)},indexation:function(t){if("undefined"!=typeof t&&(t.preventDefault?t.preventDefault():t.returnValue=!1),cp.dialog("Начать индексацию?")){e("#indexation-good").hide(),e("#loader").fadeIn();var i="/"+ADMIN_DIR+"/search/indexer/";e.ajax({url:i,type:"get",data:{start:0},success:function(t){"good"!=t?e.get(i,{start:t}):(e("#loader").fadeOut(),e("#indexation-good").show())},error:function(e){}})}},push:function(e){n.push(e)},pop:function(){return n.pop()},length:function(){return n.length}}}(jQuery);!function(e){e.Jcrop=function(t,i){function n(e){return Math.round(e)+"px"}function o(e){return A.baseClass+"-"+e}function s(){return e.fx.step.hasOwnProperty("backgroundColor")}function r(t){var i=e(t).offset();return[i.left,i.top]}function a(e){return[e.pageX-N[0],e.pageY-N[1]]}function l(t){"object"!=typeof t&&(t={}),A=e.extend(A,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof A[t]&&(A[t]=function(){})})}function c(e,t,i){if(N=r(H),fe.setCursor("move"===e?e:e+"-resize"),"move"===e)return fe.activateHandlers(u(t),g,i);var n=ue.getFixed(),o=h(e),s=ue.getCorner(h(o));
ue.setPressed(ue.getCorner(o)),ue.setCurrent(s),fe.activateHandlers(d(e,n),g,i)}function d(e,t){return function(i){if(A.aspectRatio)switch(e){case"e":i[1]=t.y+1;break;case"w":i[1]=t.y+1;break;case"n":i[0]=t.x+1;break;case"s":i[0]=t.x+1}else switch(e){case"e":i[1]=t.y2;break;case"w":i[1]=t.y2;break;case"n":i[0]=t.x2;break;case"s":i[0]=t.x2}ue.setCurrent(i),pe.update()}}function u(e){var t=e;return me.watchKeys(),function(e){ue.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,pe.update()}}function h(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function p(e){return function(t){return A.disabled?!1:"move"!==e||A.allowMove?(N=r(H),ne=!0,c(e,a(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function f(e,t,i){var n=e.width(),o=e.height();n>t&&t>0&&(n=t,o=t/e.width()*e.height()),o>i&&i>0&&(o=i,n=i/e.height()*e.width()),te=e.width()/n,ie=e.height()/o,e.width(n).height(o)}function m(e){return{x:e.x*te,y:e.y*ie,x2:e.x2*te,y2:e.y2*ie,w:e.w*te,h:e.h*ie}}function g(e){var t=ue.getFixed();t.w>A.minSelect[0]&&t.h>A.minSelect[1]?(pe.enableHandles(),pe.done()):pe.release(),fe.setCursor(A.allowSelect?"crosshair":"default")}function v(e){if(A.disabled)return!1;if(!A.allowSelect)return!1;ne=!0,N=r(H),pe.disableHandles(),fe.setCursor("crosshair");var t=a(e);return ue.setPressed(t),pe.update(),fe.activateHandlers(y,g,"touch"===e.type.substring(0,5)),me.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function y(e){ue.setCurrent(e),pe.update()}function b(){var t=e("<div></div>").addClass(o("tracker"));return O&&t.css({opacity:0,backgroundColor:"white"}),t}function w(e){B.removeClass().addClass(o("holder")).addClass(e)}function _(e,t){function i(){window.setTimeout(y,u)}var n=e[0]/te,o=e[1]/ie,s=e[2]/te,r=e[3]/ie;if(!oe){var a=ue.flipCoords(n,o,s,r),l=ue.getFixed(),c=[l.x,l.y,l.x2,l.y2],d=c,u=A.animationDelay,h=a[0]-c[0],p=a[1]-c[1],f=a[2]-c[2],m=a[3]-c[3],g=0,v=A.swingSpeed;n=d[0],o=d[1],s=d[2],r=d[3],pe.animMode(!0);var y=function(){return function(){g+=(100-g)/v,d[0]=Math.round(n+g/100*h),d[1]=Math.round(o+g/100*p),d[2]=Math.round(s+g/100*f),d[3]=Math.round(r+g/100*m),g>=99.8&&(g=100),100>g?(C(d),i()):(pe.done(),pe.animMode(!1),"function"==typeof t&&t.call(ge))}}();i()}}function k(e){C([e[0]/te,e[1]/ie,e[2]/te,e[3]/ie]),A.onSelect.call(ge,m(ue.getFixed())),pe.enableHandles()}function C(e){ue.setPressed([e[0],e[1]]),ue.setCurrent([e[2],e[3]]),pe.update()}function x(){return m(ue.getFixed())}function D(){return ue.getFixed()}function T(e){l(e),I()}function M(){A.disabled=!0,pe.disableHandles(),pe.setCursor("default"),fe.setCursor("default")}function E(){A.disabled=!1,I()}function S(){pe.done(),fe.activateHandlers(null,null)}function $(){B.remove(),L.show(),L.css("visibility","visible"),e(t).removeData("Jcrop")}function U(e,t){pe.release(),M();var i=new Image;i.onload=function(){var n=i.width,o=i.height,s=A.boxWidth,r=A.boxHeight;H.width(n).height(o),H.attr("src",e),W.attr("src",e),f(H,s,r),Y=H.width(),G=H.height(),W.width(Y).height(G),ae.width(Y+2*re).height(G+2*re),B.width(Y).height(G),he.resize(Y,G),E(),"function"==typeof t&&t.call(ge)},i.src=e}function F(e,t,i){var n=t||A.bgColor;A.bgFade&&s()&&A.fadeTime&&!i?e.animate({backgroundColor:n},{queue:!1,duration:A.fadeTime}):e.css("backgroundColor",n)}function I(e){A.allowResize?e?pe.enableOnly():pe.enableHandles():pe.disableHandles(),fe.setCursor(A.allowSelect?"crosshair":"default"),pe.setCursor(A.allowMove?"move":"default"),A.hasOwnProperty("trueSize")&&(te=A.trueSize[0]/Y,ie=A.trueSize[1]/G),A.hasOwnProperty("setSelect")&&(k(A.setSelect),pe.done(),delete A.setSelect),he.refresh(),A.bgColor!=le&&(F(A.shade?he.getShades():B,A.shade?A.shadeColor||A.bgColor:A.bgColor),le=A.bgColor),ce!=A.bgOpacity&&(ce=A.bgOpacity,A.shade?he.refresh():pe.setBgOpacity(ce)),J=A.maxSize[0]||0,K=A.maxSize[1]||0,Z=A.minSize[0]||0,ee=A.minSize[1]||0,A.hasOwnProperty("outerImage")&&(H.attr("src",A.outerImage),delete A.outerImage),pe.refresh()}var N,A=e.extend({},e.Jcrop.defaults),j=navigator.userAgent.toLowerCase(),O=/msie/.test(j),z=/msie [1-6]\./.test(j);"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof i&&(i={}),l(i);var P={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},L=e(t),R=!0;if("IMG"==t.tagName){if(0!=L[0].width&&0!=L[0].height)L.width(L[0].width),L.height(L[0].height);else{var V=new Image;V.src=L[0].src,L.width(V.width),L.height(V.height)}var H=L.clone().removeAttr("id").css(P).show();H.width(L.width()),H.height(L.height()),L.after(H).hide()}else H=L.css(P).show(),R=!1,null===A.shade&&(A.shade=!0);f(H,A.boxWidth,A.boxHeight);var Y=H.width(),G=H.height(),B=e("<div />").width(Y).height(G).addClass(o("holder")).css({position:"relative",backgroundColor:A.bgColor}).insertAfter(L).append(H);A.addClass&&B.addClass(A.addClass);var W=e("<div />"),q=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),X=e("<div />").width("100%").height("100%").css("zIndex",320),Q=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=ue.getFixed();A.onDblClick.call(ge,e)}).insertBefore(H).append(q,X);R&&(W=e("<img />").attr("src",H.attr("src")).css(P).width(Y).height(G),q.append(W)),z&&Q.css({overflowY:"hidden"});var J,K,Z,ee,te,ie,ne,oe,se,re=A.boundary,ae=b().width(Y+2*re).height(G+2*re).css({position:"absolute",top:n(-re),left:n(-re),zIndex:290}).mousedown(v),le=A.bgColor,ce=A.bgOpacity;N=r(H);var de=function(){function e(){var e,t={},i=["touchstart","touchmove","touchend"],n=document.createElement("div");try{for(e=0;e<i.length;e++){var o=i[e];o="on"+o;var s=o in n;s||(n.setAttribute(o,"return;"),s="function"==typeof n[o]),t[i[e]]=s}return t.touchstart&&t.touchend&&t.touchmove}catch(r){return!1}}function t(){return A.touchSupport===!0||A.touchSupport===!1?A.touchSupport:e()}return{createDragger:function(e){return function(t){return A.disabled?!1:"move"!==e||A.allowMove?(N=r(H),ne=!0,c(e,a(de.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1):!1}},newSelection:function(e){return v(de.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),ue=function(){function e(e){e=r(e),f=h=e[0],m=p=e[1]}function t(e){e=r(e),d=e[0]-f,u=e[1]-m,f=e[0],m=e[1]}function i(){return[d,u]}function n(e){var t=e[0],i=e[1];0>h+t&&(t-=t+h),0>p+i&&(i-=i+p),m+i>G&&(i+=G-(m+i)),f+t>Y&&(t+=Y-(f+t)),h+=t,f+=t,p+=i,m+=i}function o(e){var t=s();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function s(){if(!A.aspectRatio)return l();var e,t,i,n,o=A.aspectRatio,s=A.minSize[0]/te,r=A.maxSize[0]/te,d=A.maxSize[1]/ie,u=f-h,g=m-p,v=Math.abs(u),y=Math.abs(g),b=v/y;return 0===r&&(r=10*Y),0===d&&(d=10*G),o>b?(t=m,i=y*o,e=0>u?h-i:i+h,0>e?(e=0,n=Math.abs((e-h)/o),t=0>g?p-n:n+p):e>Y&&(e=Y,n=Math.abs((e-h)/o),t=0>g?p-n:n+p)):(e=f,n=v/o,t=0>g?p-n:p+n,0>t?(t=0,i=Math.abs((t-p)*o),e=0>u?h-i:i+h):t>G&&(t=G,i=Math.abs(t-p)*o,e=0>u?h-i:i+h)),e>h?(s>e-h?e=h+s:e-h>r&&(e=h+r),t=t>p?p+(e-h)/o:p-(e-h)/o):h>e&&(s>h-e?e=h-s:h-e>r&&(e=h-r),t=t>p?p+(h-e)/o:p-(h-e)/o),0>e?(h-=e,e=0):e>Y&&(h-=e-Y,e=Y),0>t?(p-=t,t=0):t>G&&(p-=t-G,t=G),c(a(h,p,e,t))}function r(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>Y&&(e[0]=Y),e[1]>G&&(e[1]=G),[Math.round(e[0]),Math.round(e[1])]}function a(e,t,i,n){var o=e,s=i,r=t,a=n;return e>i&&(o=i,s=e),t>n&&(r=n,a=t),[o,r,s,a]}function l(){var e,t=f-h,i=m-p;return J&&Math.abs(t)>J&&(f=t>0?h+J:h-J),K&&Math.abs(i)>K&&(m=i>0?p+K:p-K),ee/ie&&Math.abs(i)<ee/ie&&(m=i>0?p+ee/ie:p-ee/ie),Z/te&&Math.abs(t)<Z/te&&(f=t>0?h+Z/te:h-Z/te),0>h&&(f-=h,h-=h),0>p&&(m-=p,p-=p),0>f&&(h-=f,f-=f),0>m&&(p-=m,m-=m),f>Y&&(e=f-Y,h-=e,f-=e),m>G&&(e=m-G,p-=e,m-=e),h>Y&&(e=h-G,m-=e,p-=e),p>G&&(e=p-G,m-=e,p-=e),c(a(h,p,f,m))}function c(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var d,u,h=0,p=0,f=0,m=0;return{flipCoords:a,setPressed:e,setCurrent:t,getOffset:i,moveOffset:n,getCorner:o,getFixed:s}}(),he=function(){function t(e,t){f.left.css({height:n(t)}),f.right.css({height:n(t)})}function i(){return o(ue.getFixed())}function o(e){f.top.css({left:n(e.x),width:n(e.w),height:n(e.y)}),f.bottom.css({top:n(e.y2),left:n(e.x),width:n(e.w),height:n(G-e.y2)}),f.right.css({left:n(e.x2),width:n(Y-e.x2)}),f.left.css({width:n(e.x)})}function s(){return e("<div />").css({position:"absolute",backgroundColor:A.shadeColor||A.bgColor}).appendTo(p)}function r(){h||(h=!0,p.insertBefore(H),i(),pe.setBgOpacity(1,0,1),W.hide(),a(A.shadeColor||A.bgColor,1),pe.isAwake()?c(A.bgOpacity,1):c(1,1))}function a(e,t){F(u(),e,t)}function l(){h&&(p.remove(),W.show(),h=!1,pe.isAwake()?pe.setBgOpacity(A.bgOpacity,1,1):(pe.setBgOpacity(1,1,1),pe.disableHandles()),F(B,0,1))}function c(e,t){h&&(A.bgFade&&!t?p.animate({opacity:1-e},{queue:!1,duration:A.fadeTime}):p.css({opacity:1-e}))}function d(){A.shade?r():l(),pe.isAwake()&&c(A.bgOpacity)}function u(){return p.children()}var h=!1,p=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),f={top:s(),left:s().height(G),right:s().height(G),bottom:s()};return{update:i,updateRaw:o,getShades:u,setBgColor:a,enable:r,disable:l,resize:t,refresh:d,opacity:c}}(),pe=function(){function t(t){var i=e("<div />").css({position:"absolute",opacity:A.borderOpacity}).addClass(o(t));return q.append(i),i}function i(t,i){var n=e("<div />").mousedown(p(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);return de.support&&n.bind("touchstart.jcrop",de.createDragger(t)),X.append(n),n}function s(e){var t=A.handleSize,n=i(e,M++).css({opacity:A.handleOpacity}).addClass(o("handle"));return t&&n.width(t).height(t),n}function r(e){return i(e,M++).addClass("jcrop-dragbar")}function a(e){var t;for(t=0;t<e.length;t++)$[e[t]]=r(e[t])}function l(e){var i,n;for(n=0;n<e.length;n++){switch(e[n]){case"n":i="hline";break;case"s":i="hline bottom";break;case"e":i="vline right";break;case"w":i="vline"}E[e[n]]=t(i)}}function c(e){var t;for(t=0;t<e.length;t++)S[e[t]]=s(e[t])}function d(e,t){A.shade||W.css({top:n(-t),left:n(-e)}),Q.css({top:n(t),left:n(e)})}function u(e,t){Q.width(Math.round(e)).height(Math.round(t))}function h(){var e=ue.getFixed();ue.setPressed([e.x,e.y]),ue.setCurrent([e.x2,e.y2]),f()}function f(e){return T?g(e):void 0}function g(e){var t=ue.getFixed();u(t.w,t.h),d(t.x,t.y),A.shade&&he.updateRaw(t),T||y(),e?A.onSelect.call(ge,m(t)):A.onChange.call(ge,m(t))}function v(e,t,i){(T||t)&&(A.bgFade&&!i?H.animate({opacity:e},{queue:!1,duration:A.fadeTime}):H.css("opacity",e))}function y(){Q.show(),A.shade?he.opacity(ce):v(ce,!0),T=!0}function w(){C(),Q.hide(),A.shade?he.opacity(1):v(1),T=!1,A.onRelease.call(ge)}function _(){U&&X.show()}function k(){return U=!0,A.allowResize?(X.show(),!0):void 0}function C(){U=!1,X.hide()}function x(e){e?(oe=!0,C()):(oe=!1,k())}function D(){x(!1),h()}var T,M=370,E={},S={},$={},U=!1;A.dragEdges&&e.isArray(A.createDragbars)&&a(A.createDragbars),e.isArray(A.createHandles)&&c(A.createHandles),A.drawBorders&&e.isArray(A.createBorders)&&l(A.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var F=b().mousedown(p("move")).css({cursor:"move",position:"absolute",zIndex:360});return de.support&&F.bind("touchstart.jcrop",de.createDragger("move")),q.append(F),C(),{updateVisible:f,update:g,release:w,refresh:h,isAwake:function(){return T},setCursor:function(e){F.css("cursor",e)},enableHandles:k,enableOnly:function(){U=!0},showHandles:_,disableHandles:C,animMode:x,setBgOpacity:v,done:D}}(),fe=function(){function t(t){ae.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",r).bind("touchend.jcrop",l):h&&e(document).bind("mousemove.jcrop",n).bind("mouseup.jcrop",o)}function i(){ae.css({zIndex:290}),e(document).unbind(".jcrop")}function n(e){return d(a(e)),!1}function o(e){return e.preventDefault(),e.stopPropagation(),ne&&(ne=!1,u(a(e)),pe.isAwake()&&A.onSelect.call(ge,m(ue.getFixed())),i(),d=function(){},u=function(){}),!1}function s(e,i,n){return ne=!0,d=e,u=i,t(n),!1}function r(e){return d(a(de.cfilter(e))),!1}function l(e){return o(de.cfilter(e))}function c(e){ae.css("cursor",e)}var d=function(){},u=function(){},h=A.trackDocument;return h||ae.mousemove(n).mouseup(o).mouseout(o),H.before(ae),{activateHandlers:s,setCursor:c}}(),me=function(){function t(){A.keySupport&&(s.show(),s.focus())}function i(e){s.hide()}function n(e,t,i){A.allowMove&&(ue.moveOffset([t,i]),pe.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function o(e){if(e.ctrlKey||e.metaKey)return!0;se=!!e.shiftKey;var t=se?10:1;switch(e.keyCode){case 37:n(e,-t,0);break;case 39:n(e,t,0);break;case 38:n(e,0,-t);break;case 40:n(e,0,t);break;case 27:A.allowSelect&&pe.release();break;case 9:return!0}return!1}var s=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),r=e("<div />").css({position:"absolute",overflow:"hidden"}).append(s);return A.keySupport&&(s.keydown(o).blur(i),z||!A.fixedSupport?(s.css({position:"absolute",left:"-20px"}),r.append(s).insertBefore(H)):s.insertBefore(H)),{watchKeys:t}}();de.support&&ae.bind("touchstart.jcrop",de.newSelection),X.hide(),I(!0);var ge={setImage:U,animateTo:_,setSelect:k,setOptions:T,tellSelect:x,tellScaled:D,setClass:w,disable:M,enable:E,cancel:S,release:pe.release,destroy:$,focus:me.watchKeys,getBounds:function(){return[Y*te,G*ie]},getWidgetSize:function(){return[Y,G]},getScaleFactor:function(){return[te,ie]},getOptions:function(){return A},ui:{holder:B,selection:Q}};return O&&B.bind("selectstart",function(){return!1}),L.data("Jcrop",ge),ge},e.fn.Jcrop=function(t,i){var n;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),n=e.Jcrop(this,t),e.isFunction(i)&&i.call(n)}):(e(this).css({display:"block",visibility:"hidden"}),n=e.Jcrop(this,t),e.isFunction(i)&&i.call(n))}),this},e.Jcrop.Loader=function(t,i,n){function o(){r.complete?(s.unbind(".jcloader"),e.isFunction(i)&&i.call(r)):window.setTimeout(o,50)}var s=e(t),r=s[0];s.bind("load.jcloader",o).bind("error.jcloader",function(t){s.unbind(".jcloader"),e.isFunction(n)&&n.call(r)}),r.complete&&e.isFunction(i)&&(s.unbind(".jcloader"),i.call(r))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e,t){function i(){return new Date(Date.UTC.apply(Date,arguments))}"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,i){i===t&&(i=0),0>i&&(i+=this.length),0>i&&(i=0);for(var n=this.length;n>i;i++)if(i in this&&this[i]===e)return i;return-1});var n=function(i,n){var o=this;this.element=e(i),this.container=n.container||"body",this.language=n.language||this.element.data("date-language")||"en",this.language=this.language in s?this.language:this.language.split("-")[0],this.language=this.language in s?this.language:"en",this.isRTL=s[this.language].rtl||!1,this.formatType=n.formatType||this.element.data("format-type")||"standard",this.format=r.parseFormat(n.format||this.element.data("date-format")||s[this.language].format||r.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=n.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=n.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-remove, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar, .add-on .fa-calendar, .add-on .fa-clock-o").parent():!1,this.componentReset=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=n.linkField||this.element.data("link-field")||!1,this.linkFormat=r.parseFormat(n.linkFormat||this.element.data("link-format")||r.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=n.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=n.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=n.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=n.initialDate||new Date,this.zIndex=n.zIndex||this.element.data("z-index")||t,this.title="undefined"==typeof n.title?!1:n.title,this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":3===this.bootcssVer?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":3===this.bootcssVer?"glyphicon-arrow-right":"icon-arrow-right"},this.icontype=this.fontAwesome?"fa":"glyphicon",this._attachEvents(),this.clickedOutside=function(t){0===e(t.target).closest(".datetimepicker").length&&o.hide()},this.formatViewType="datetime","formatViewType"in n?this.formatViewType=n.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in n?this.minView=n.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=r.convertViewMode(this.minView),this.maxView=r.modes.length-1,"maxView"in n?this.maxView=n.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=r.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in n?this.wheelViewModeNavigation=n.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in n?this.wheelViewModeNavigationInverseDirection=n.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in n?this.wheelViewModeNavigationDelay=n.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in n?this.startViewMode=n.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=r.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in n?this.viewSelect=n.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=r.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in n?this.forceParse=n.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));for(var a=3===this.bootcssVer?r.templateV3:r.template;-1!==a.indexOf("{iconType}");)a=a.replace("{iconType}",this.icontype);for(;-1!==a.indexOf("{leftArrow}");)a=a.replace("{leftArrow}",this.icons.leftArrow);for(;-1!==a.indexOf("{rightArrow}");)a=a.replace("{rightArrow}",this.icons.rightArrow);if(this.picker=e(a).appendTo(this.isInline?this.element:this.container).on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(e.fn.mousewheel?this.picker.on({mousewheel:e.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL){this.picker.addClass("datetimepicker-rtl");var l=3===this.bootcssVer?".prev span, .next span":".prev i, .next i";this.picker.find(l).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}e(document).on("mousedown",this.clickedOutside),this.autoclose=!1,"autoclose"in n?this.autoclose=n.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in n?this.keyboardNavigation=n.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=n.todayBtn||this.element.data("date-today-btn")||!1,this.clearBtn=n.clearBtn||this.element.data("date-clear-btn")||!1,this.todayHighlight=n.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(n.weekStart||this.element.data("date-weekstart")||s[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.datesDisabled=[],this.daysOfWeekDisabled=[],this.setStartDate(n.startDate||this.element.data("date-startdate")),this.setEndDate(n.endDate||this.element.data("date-enddate")),this.setDatesDisabled(n.datesDisabled||this.element.data("date-dates-disabled")),this.setDaysOfWeekDisabled(n.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setMinutesDisabled(n.minutesDisabled||this.element.data("date-minute-disabled")),this.setHoursDisabled(n.hoursDisabled||this.element.data("date-hour-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};n.prototype={constructor:n,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:e.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]];for(var t,i,n=0;n<this._events.length;n++)t=this._events[n][0],i=this._events[n][1],t.on(i)},_detachEvents:function(){for(var e,t,i=0;i<this._events.length;i++)e=this._events[i][0],t=this._events[i][1],e.off(t);this._events=[]},show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(t){this.isVisible&&(this.isInline||(this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),e(document).off("mousedown",this.clickedOutside),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var e=this.getUTCDate();return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(new Date(e.getTime()-6e4*e.getTimezoneOffset()))},setUTCDate:function(e){e>=this.startDate&&e<=this.endDate?(this.date=e,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:e,startDate:this.startDate,endDate:this.endDate})},setFormat:function(e){this.format=r.parseFormat(e,this.formatType);var t;this.isInput?t=this.element:this.component&&(t=this.element.find("input")),t&&t.val()&&this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t)),this.linkField&&e("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(e){return e==t&&(e=this.format),r.formatDate(this.date,e,this.language,this.formatType)},setStartDate:function(e){this.startDate=e||-(1/0),this.startDate!==-(1/0)&&(this.startDate=r.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(e){this.endDate=e||1/0,this.endDate!==1/0&&(this.endDate=r.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDatesDisabled:function(t){this.datesDisabled=t||[],e.isArray(this.datesDisabled)||(this.datesDisabled=this.datesDisabled.split(/,\s*/)),this.datesDisabled=e.map(this.datesDisabled,function(e){return r.parseDate(e,this.format,this.language,this.formatType).toDateString()}),this.update(),this.updateNavArrows()},setTitle:function(e,t){return this.picker.find(e).find("th:eq(1)").text(this.title===!1?t:this.title)},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[],e.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},setMinutesDisabled:function(t){this.minutesDisabled=t||[],e.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/)),this.minutesDisabled=e.map(this.minutesDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},setHoursDisabled:function(t){this.hoursDisabled=t||[],e.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/)),this.hoursDisabled=e.map(this.hoursDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){if(!this.zIndex){var t=0;e("div").each(function(){var i=parseInt(e(this).css("zIndex"),10);i>t&&(t=i)}),this.zIndex=t+10}var i,n,o,s;s=this.container instanceof e?this.container.offset():e(this.container).offset(),this.component?(i=this.component.offset(),o=i.left,"bottom-left"!=this.pickerPosition&&"top-left"!=this.pickerPosition||(o+=this.component.outerWidth()-this.picker.outerWidth())):(i=this.element.offset(),o=i.left,"bottom-left"!=this.pickerPosition&&"top-left"!=this.pickerPosition||(o+=this.element.outerWidth()-this.picker.outerWidth()));var r=document.body.clientWidth||window.innerWidth;o+220>r&&(o=r-220),this.component?(n=n-s.top+169,o=o-s.left+210):n="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?i.top-this.picker.outerHeight():i.top+this.height,this.picker.css({top:n,left:o,zIndex:this.zIndex})}},update:function(){var e,t=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],t=!0):(e=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate,("string"==typeof e||e instanceof String)&&(e=e.replace(/^\s+|\s+$/g,""))),e||(e=new Date,t=!1),this.date=r.parseDate(e,this.format,this.language,this.formatType),t&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var e=this.weekStart,t="<tr>";e<this.weekStart+7;)t+='<th class="dow">'+s[this.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datetimepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+s[this.language].monthsShort[t++]+"</span>";this.picker.find(".datetimepicker-months td").html(e)},fill:function(){if(null!=this.date&&null!=this.viewDate){var t=new Date(this.viewDate),n=t.getUTCFullYear(),o=t.getUTCMonth(),a=t.getUTCDate(),l=t.getUTCHours(),c=t.getUTCMinutes(),d=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),u=this.startDate!==-(1/0)?this.startDate.getUTCMonth()+1:-(1/0),h=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,p=this.endDate!==1/0?this.endDate.getUTCMonth()+1:1/0,f=new i(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;if(this.setTitle(".datetimepicker-days",s[this.language].months[o]+" "+n),"time"==this.formatViewType){var g=this.getFormattedDate();this.setTitle(".datetimepicker-hours",g),this.setTitle(".datetimepicker-minutes",g)}else this.setTitle(".datetimepicker-hours",a+" "+s[this.language].months[o]+" "+n),this.setTitle(".datetimepicker-minutes",a+" "+s[this.language].months[o]+" "+n);this.picker.find("tfoot th.today").text(s[this.language].today||s.en.today).toggle(this.todayBtn!==!1),this.picker.find("tfoot th.clear").text(s[this.language].clear||s.en.clear).toggle(this.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var v=i(n,o-1,28,0,0,0,0),y=r.getDaysInMonth(v.getUTCFullYear(),v.getUTCMonth());v.setUTCDate(y),v.setUTCDate(y-(v.getUTCDay()-this.weekStart+7)%7);var b=new Date(v);b.setUTCDate(b.getUTCDate()+42),b=b.valueOf();for(var w,_=[];v.valueOf()<b;)v.getUTCDay()==this.weekStart&&_.push("<tr>"),w="",v.getUTCFullYear()<n||v.getUTCFullYear()==n&&v.getUTCMonth()<o?w+=" old":(v.getUTCFullYear()>n||v.getUTCFullYear()==n&&v.getUTCMonth()>o)&&(w+=" new"),this.todayHighlight&&v.getUTCFullYear()==m.getFullYear()&&v.getUTCMonth()==m.getMonth()&&v.getUTCDate()==m.getDate()&&(w+=" today"),v.valueOf()==f&&(w+=" active"),(v.valueOf()+864e5<=this.startDate||v.valueOf()>this.endDate||-1!==e.inArray(v.getUTCDay(),this.daysOfWeekDisabled)||-1!==e.inArray(v.toDateString(),this.datesDisabled))&&(w+=" disabled"),_.push('<td class="day'+w+'">'+v.getUTCDate()+"</td>"),v.getUTCDay()==this.weekEnd&&_.push("</tr>"),v.setUTCDate(v.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(_.join("")),_=[];for(var k="",C="",x="",D=this.hoursDisabled||[],T=0;24>T;T++)if(-1===D.indexOf(T)){var M=i(n,o,a,T);w="",M.valueOf()+36e5<=this.startDate||M.valueOf()>this.endDate?w+=" disabled":l==T&&(w+=" active"),this.showMeridian&&2==s[this.language].meridiem.length?(C=12>T?s[this.language].meridiem[0]:s[this.language].meridiem[1],C!=x&&(""!=x&&_.push("</fieldset>"),_.push('<fieldset class="hour"><legend>'+C.toUpperCase()+"</legend>")),x=C,k=T%12?T%12:12,_.push('<span class="hour'+w+" hour_"+(12>T?"am":"pm")+'">'+k+"</span>"),23==T&&_.push("</fieldset>")):(k=T+":00",_.push('<span class="hour'+w+'">'+k+"</span>"))}this.picker.find(".datetimepicker-hours td").html(_.join("")),_=[],k="",C="",x="";for(var E=this.minutesDisabled||[],T=0;60>T;T+=this.minuteStep)if(-1===E.indexOf(T)){var M=i(n,o,a,l,T,0);w="",M.valueOf()<this.startDate||M.valueOf()>this.endDate?w+=" disabled":Math.floor(c/this.minuteStep)==Math.floor(T/this.minuteStep)&&(w+=" active"),this.showMeridian&&2==s[this.language].meridiem.length?(C=12>l?s[this.language].meridiem[0]:s[this.language].meridiem[1],
C!=x&&(""!=x&&_.push("</fieldset>"),_.push('<fieldset class="minute"><legend>'+C.toUpperCase()+"</legend>")),x=C,k=l%12?l%12:12,_.push('<span class="minute'+w+'">'+k+":"+(10>T?"0"+T:T)+"</span>"),59==T&&_.push("</fieldset>")):(k=T+":00",_.push('<span class="minute'+w+'">'+l+":"+(10>T?"0"+T:T)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(_.join(""));var S=this.date.getUTCFullYear(),$=this.setTitle(".datetimepicker-months",n).end().find("span").removeClass("active");if(S==n){var U=$.length-12;$.eq(this.date.getUTCMonth()+U).addClass("active")}(d>n||n>h)&&$.addClass("disabled"),n==d&&$.slice(0,u+1).addClass("disabled"),n==h&&$.slice(p).addClass("disabled"),_="",n=10*parseInt(n/10,10);var F=this.setTitle(".datetimepicker-years",n+"-"+(n+9)).end().find("td");n-=1;for(var T=-1;11>T;T++)_+='<span class="year'+(-1==T||10==T?" old":"")+(S==n?" active":"")+(d>n||n>h?" disabled":"")+'">'+n+"</span>",n+=1;F.html(_),this.place()}},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth(),n=e.getUTCDate(),o=e.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()&&o<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()&&o>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(t){if(t.preventDefault(),t.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var i=t.originalEvent,n=i.wheelDelta,o=n>0?1:0===n?0:-1;this.wheelViewModeNavigationInverseDirection&&(o=-o),this.showMode(o),setTimeout(e.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target).closest("span, td, th, legend");if(n.is("."+this.icontype)&&(n=e(n).parent().closest("span, td, th, legend")),1==n.length){if(n.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var o=r.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,o);break;case 1:this.viewDate=this.moveDate(this.viewDate,o);break;case 2:this.viewDate=this.moveMonth(this.viewDate,o);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,o)}this.fill(),this.element.trigger({type:n[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"clear":this.reset(),this.autoclose&&this.hide();break;case"today":var s=new Date;s=i(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),0),s<this.startDate?s=this.startDate:s>this.endDate&&(s=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(s),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){var a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCDate(),d=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();if(n.is(".month")?(this.viewDate.setUTCDate(1),l=n.parent().find("span").index(n),c=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(i(a,l,c,d,u,h,0))):n.is(".year")?(this.viewDate.setUTCDate(1),a=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(a),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(i(a,l,c,d,u,h,0))):n.is(".hour")?(d=parseInt(n.text(),10)||0,(n.hasClass("hour_am")||n.hasClass("hour_pm"))&&(12==d&&n.hasClass("hour_am")?d=0:12!=d&&n.hasClass("hour_pm")&&(d+=12)),this.viewDate.setUTCHours(d),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(i(a,l,c,d,u,h,0))):n.is(".minute")&&(u=parseInt(n.text().substr(n.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(u),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(i(a,l,c,d,u,h,0))),0!=this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var c=parseInt(n.text(),10)||1,a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),d=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();n.is(".old")?0===l?(l=11,a-=1):l-=1:n.is(".new")&&(11==l?(l=0,a+=1):l+=1),this.viewDate.setUTCFullYear(a),this.viewDate.setUTCMonth(l,c),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(i(a,l,c,d,u,h,0))}var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(e,t){t&&"date"!=t||(this.date=e),t&&"view"!=t||(this.viewDate=e),this.fill(),this.setValue();var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),this.autoclose&&(!t||"date"==t)),this.element.trigger({type:"changeDate",date:this.getDate()}),null==e&&(this.date=this.viewDate)},moveMinute:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+t*this.minuteStep),i},moveHour:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCHours(i.getUTCHours()+t),i},moveDate:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCDate(i.getUTCDate()+t),i},moveMonth:function(e,t){if(!t)return e;var i,n,o=new Date(e.valueOf()),s=o.getUTCDate(),r=o.getUTCMonth(),a=Math.abs(t);if(t=t>0?1:-1,1==a)n=-1==t?function(){return o.getUTCMonth()==r}:function(){return o.getUTCMonth()!=i},i=r+t,o.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;a>l;l++)o=this.moveMonth(o,t);i=o.getUTCMonth(),o.setUTCDate(s),n=function(){return i!=o.getUTCMonth()}}for(;n();)o.setUTCDate(--s),o.setUTCMonth(i);return o},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27==e.keyCode&&this.show());var t,i,n,o=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;t=37==e.keyCode?-1:1,viewMode=this.viewMode,e.ctrlKey?viewMode+=2:e.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):3==viewMode?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):2==viewMode?(i=this.moveDate(this.date,t),n=this.moveDate(this.viewDate,t)):1==viewMode?(i=this.moveHour(this.date,t),n=this.moveHour(this.viewDate,t)):0==viewMode&&(i=this.moveMinute(this.date,t),n=this.moveMinute(this.viewDate,t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),o=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;t=38==e.keyCode?-1:1,viewMode=this.viewMode,e.ctrlKey?viewMode+=2:e.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):3==viewMode?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):2==viewMode?(i=this.moveDate(this.date,7*t),n=this.moveDate(this.viewDate,7*t)):1==viewMode?this.showMeridian?(i=this.moveHour(this.date,6*t),n=this.moveHour(this.viewDate,6*t)):(i=this.moveHour(this.date,4*t),n=this.moveHour(this.viewDate,4*t)):0==viewMode&&(i=this.moveMinute(this.date,4*t),n=this.moveMinute(this.viewDate,4*t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),o=!0);break;case 13:if(0!=this.viewMode){var s=this.viewMode;this.showMode(-1),this.fill(),s==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();e.preventDefault();break;case 9:this.hide()}if(o){var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change(),this.element.trigger({type:"changeDate",date:this.getDate()})}},showMode:function(e){if(e){var t=Math.max(0,Math.min(r.modes.length-1,this.viewMode+e));t>=this.minView&&t<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:t}),this.viewMode=t)}this.picker.find(">div").hide().filter(".datetimepicker-"+r.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(e){this._setDate(null,"date")},convertViewModeText:function(e){switch(e){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var o=e.fn.datetimepicker;e.fn.datetimepicker=function(i){var o=Array.apply(null,arguments);o.shift();var s;return this.each(function(){var r=e(this),a=r.data("datetimepicker"),l="object"==typeof i&&i;return a||r.data("datetimepicker",a=new n(this,e.extend({},e.fn.datetimepicker.defaults,l))),"string"==typeof i&&"function"==typeof a[i]&&(s=a[i].apply(a,o),s!==t)?!1:void 0}),s!==t?s:this},e.fn.datetimepicker.defaults={},e.fn.datetimepicker.Constructor=n;var s=e.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today",clear:"Clear"}},r={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,r.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDefaultFormat:function(e,t){if("standard"==e)return"input"==t?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==e)return"input"==t?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(e){if("standard"==e)return/t|hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==e)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(e,t){var i=e.replace(this.validParts(t),"\x00").split("\x00"),n=e.match(this.validParts(t));if(!i||!i.length||!n||0==n.length)throw new Error("Invalid date format.");return{separators:i,parts:n}},parseDate:function(t,o,r,a){if(t instanceof Date){var l=new Date(t.valueOf()-6e4*t.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(t)&&(o=this.parseFormat("yyyy-mm-dd",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(t)&&(o=this.parseFormat("yyyy-mm-dd hh:ii",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(t)&&(o=this.parseFormat("yyyy-mm-dd hh:ii:ss",a)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(t)){var c,d,u=/([-+]\d+)([dmwy])/,h=t.match(/([-+]\d+)([dmwy])/g);t=new Date;for(var p=0;p<h.length;p++)switch(c=u.exec(h[p]),d=parseInt(c[1]),c[2]){case"d":t.setUTCDate(t.getUTCDate()+d);break;case"m":t=n.prototype.moveMonth.call(n.prototype,t,d);break;case"w":t.setUTCDate(t.getUTCDate()+7*d);break;case"y":t=n.prototype.moveYear.call(n.prototype,t,d)}return i(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),0)}var f,m,c,h=t&&t.toString().match(this.nonpunctuation)||[],t=new Date(0,0,0,0,0,0,0),g={},v=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],y={hh:function(e,t){return e.setUTCHours(t)},h:function(e,t){return e.setUTCHours(t)},HH:function(e,t){return e.setUTCHours(12==t?0:t)},H:function(e,t){return e.setUTCHours(12==t?0:t)},ii:function(e,t){return e.setUTCMinutes(t)},i:function(e,t){return e.setUTCMinutes(t)},ss:function(e,t){return e.setUTCSeconds(t)},s:function(e,t){return e.setUTCSeconds(t)},yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!=t;){if(isNaN(e.getUTCMonth()))return e;e.setUTCDate(e.getUTCDate()-1)}return e},d:function(e,t){return e.setUTCDate(t)},p:function(e,t){return e.setUTCHours(1==t?e.getUTCHours()+12:e.getUTCHours())}};if(y.M=y.MM=y.mm=y.m,y.dd=y.d,y.P=y.p,t=i(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()),h.length==o.parts.length){for(var p=0,b=o.parts.length;b>p;p++){if(f=parseInt(h[p],10),c=o.parts[p],isNaN(f))switch(c){case"MM":m=e(s[r].months).filter(function(){var e=this.slice(0,h[p].length),t=h[p].slice(0,e.length);return e==t}),f=e.inArray(m[0],s[r].months)+1;break;case"M":m=e(s[r].monthsShort).filter(function(){var e=this.slice(0,h[p].length),t=h[p].slice(0,e.length);return e.toLowerCase()==t.toLowerCase()}),f=e.inArray(m[0],s[r].monthsShort)+1;break;case"p":case"P":f=e.inArray(h[p].toLowerCase(),s[r].meridiem)}g[c]=f}for(var w,p=0;p<v.length;p++)w=v[p],w in g&&!isNaN(g[w])&&y[w](t,g[w])}return t},formatDate:function(t,i,n,o){if(null==t)return"";var a;if("standard"==o)a={t:t.getTime(),yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear(),m:t.getUTCMonth()+1,M:s[n].monthsShort[t.getUTCMonth()],MM:s[n].months[t.getUTCMonth()],d:t.getUTCDate(),D:s[n].daysShort[t.getUTCDay()],DD:s[n].days[t.getUTCDay()],p:2==s[n].meridiem.length?s[n].meridiem[t.getUTCHours()<12?0:1]:"",h:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()},2==s[n].meridiem.length?a.H=a.h%12==0?12:a.h%12:a.H=a.h,a.HH=(a.H<10?"0":"")+a.H,a.P=a.p.toUpperCase(),a.hh=(a.h<10?"0":"")+a.h,a.ii=(a.i<10?"0":"")+a.i,a.ss=(a.s<10?"0":"")+a.s,a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m;else{if("php"!=o)throw new Error("Invalid format type.");a={y:t.getUTCFullYear().toString().substring(2),Y:t.getUTCFullYear(),F:s[n].months[t.getUTCMonth()],M:s[n].monthsShort[t.getUTCMonth()],n:t.getUTCMonth()+1,t:r.getDaysInMonth(t.getUTCFullYear(),t.getUTCMonth()),j:t.getUTCDate(),l:s[n].days[t.getUTCDay()],D:s[n].daysShort[t.getUTCDay()],w:t.getUTCDay(),N:0==t.getUTCDay()?7:t.getUTCDay(),S:t.getUTCDate()%10<=s[n].suffix.length?s[n].suffix[t.getUTCDate()%10-1]:"",a:2==s[n].meridiem.length?s[n].meridiem[t.getUTCHours()<12?0:1]:"",g:t.getUTCHours()%12==0?12:t.getUTCHours()%12,G:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()},a.m=(a.n<10?"0":"")+a.n,a.d=(a.j<10?"0":"")+a.j,a.A=a.a.toString().toUpperCase(),a.h=(a.g<10?"0":"")+a.g,a.H=(a.G<10?"0":"")+a.G,a.i=(a.i<10?"0":"")+a.i,a.s=(a.s<10?"0":"")+a.s}for(var t=[],l=e.extend([],i.separators),c=0,d=i.parts.length;d>c;c++)l.length&&t.push(l.shift()),t.push(a[i.parts[c]]);return l.length&&t.push(l.shift()),t.join("")},convertViewMode:function(e){switch(e){case 4:case"decade":e=4;break;case 3:case"year":e=3;break;case 2:case"month":e=2;break;case 1:case"day":e=1;break;case 0:case"hour":e=0}return e},headTemplate:'<thead><tr><th class="prev"><i class="{iconType} {leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{iconType} {rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};r.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+r.headTemplate+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table></div></div>",r.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+r.headTemplateV3+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+"</table></div></div>",e.fn.datetimepicker.DPGlobal=r,e.fn.datetimepicker.noConflict=function(){return e.fn.datetimepicker=o,this},e(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(t){var i=e(this);i.data("datetimepicker")||(t.preventDefault(),i.datetimepicker("show"))}),e(function(){e('[data-provide="datetimepicker-inline"]').datetimepicker()})}),function(){var e,t,i,n,o,s,r,a,l=[].slice,c={}.hasOwnProperty,d=function(e,t){function i(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};r=function(){},t=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,i,n,o,s;if(n=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},i=this._callbacks[n])for(o=0,s=i.length;s>o;o++)t=i[o],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var i,n,o,s,r;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(n=this._callbacks[e],!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(o=s=0,r=n.length;r>s;o=++s)if(i=n[o],i===t){n.splice(o,1);break}return this},e}(),e=function(e){function i(e,t){var o,s,r;if(this.element=e,this.version=i.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(i.instances.push(this),this.element.dropzone=this,o=null!=(r=i.optionsForElement(this.element))?r:{},this.options=n({},this.defaultOptions,o,null!=t?t:{}),this.options.forceFallback||!i.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(s=this.getExistingFallback())&&s.parentNode&&s.parentNode.removeChild(s),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=i.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=i.getElements(this.options.clickable,"clickable")),this.init()}var n,o;return d(i,e),i.prototype.Emitter=t,i.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],i.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,filesizeBase:1e3,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return r},forceFallback:!1,fallback:function(){var e,t,n,o,s,r;for(this.element.className=""+this.element.className+" dz-browser-not-supported",r=this.element.getElementsByTagName("div"),o=0,s=r.length;s>o;o++)e=r[o],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=i.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),n=t.getElementsByTagName("span")[0],n&&(n.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,i,n;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},i=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=i*t.optHeight:null==t.optHeight&&(t.optHeight=1/i*t.optWidth),n=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):i>n?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*n):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/n),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:r,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:r,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,n,o,s,r,a,l,c,d,u,h,p,f;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=i.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),u=e.previewElement.querySelectorAll("[data-dz-name]"),s=0,l=u.length;l>s;s++)t=u[s],t.textContent=e.name;for(h=e.previewElement.querySelectorAll("[data-dz-size]"),r=0,c=h.length;c>r;r++)t=h[r],t.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=i.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),n=function(t){return function(n){return n.preventDefault(),n.stopPropagation(),e.status===i.UPLOADING?i.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?i.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)}}(this),p=e.previewElement.querySelectorAll("[data-dz-remove]"),f=[],a=0,d=p.length;d>a;a++)o=p[a],f.push(o.addEventListener("click",n));return f}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var i,n,o,s;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),s=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),n=0,o=s.length;o>n;n++)i=s[n],i.alt=e.name,i.src=t;return setTimeout(function(t){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(e,t){var i,n,o,s,r;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),s=e.previewElement.querySelectorAll("[data-dz-errormessage]"),r=[],n=0,o=s.length;o>n;n++)i=s[n],r.push(i.textContent=t);return r}},errormultiple:r,processing:function(e){return e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink)?e._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:r,uploadprogress:function(e,t,i){var n,o,s,r,a;if(e.previewElement){for(r=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),a=[],o=0,s=r.length;s>o;o++)n=r[o],"PROGRESS"===n.nodeName?a.push(n.value=t):a.push(n.style.width=""+t+"%");return a}},totaluploadprogress:r,sending:r,sendingmultiple:r,success:function(e){return e.previewElement?e.previewElement.classList.add("dz-success"):void 0},successmultiple:r,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:r,complete:function(e){return e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement?e.previewElement.classList.add("dz-complete"):void 0},completemultiple:r,maxfilesexceeded:r,maxfilesreached:r,queuecomplete:r,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},n=function(){var e,t,i,n,o,s,r;for(n=arguments[0],i=2<=arguments.length?l.call(arguments,1):[],s=0,r=i.length;r>s;s++){t=i[s];for(e in t)o=t[e],n[e]=o}return n},i.prototype.getAcceptedFiles=function(){var e,t,i,n,o;for(n=this.files,o=[],t=0,i=n.length;i>t;t++)e=n[t],e.accepted&&o.push(e);return o},i.prototype.getRejectedFiles=function(){var e,t,i,n,o;for(n=this.files,o=[],t=0,i=n.length;i>t;t++)e=n[t],e.accepted||o.push(e);return o},i.prototype.getFilesWithStatus=function(e){var t,i,n,o,s;for(o=this.files,s=[],i=0,n=o.length;n>i;i++)t=o[i],t.status===e&&s.push(t);return s},i.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(i.QUEUED)},i.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(i.UPLOADING);
},i.prototype.getActiveFiles=function(){var e,t,n,o,s;for(o=this.files,s=[],t=0,n=o.length;n>t;t++)e=o[t],e.status!==i.UPLOADING&&e.status!==i.QUEUED||s.push(e);return s},i.prototype.init=function(){var e,t,n,o,s,r,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(i.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(n=function(e){return function(){return e.hiddenFileInput&&document.body.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.body.appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,i,o,s;if(i=e.hiddenFileInput.files,i.length)for(o=0,s=i.length;s>o;o++)t=i[o],e.addFile(t);return n()})}}(this))(),this.URL=null!=(r=window.URL)?r:window.webkitURL,a=this.events,o=0,s=a.length;s>o;o++)e=a[o],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(t){return 0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length?setTimeout(function(){return e.emit("queuecomplete")},0):void 0}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(i){return t(i),e.emit("dragenter",i)}}(this),dragover:function(e){return function(i){var n;try{n=i.dataTransfer.effectAllowed}catch(o){}return i.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",t(i),e.emit("dragover",i)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(i){return t(i),e.drop(i)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(n){return t!==e.element||n.target===e.element||i.elementInside(n.target,e.element.querySelector(".dz-message"))?e.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},i.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,i.instances.splice(i.instances.indexOf(this),1)},i.prototype.updateTotalUploadProgress=function(){var e,t,i,n,o,s,r,a;if(n=0,i=0,e=this.getActiveFiles(),e.length){for(a=this.getActiveFiles(),s=0,r=a.length;r>s;s++)t=a[s],n+=t.upload.bytesSent,i+=t.upload.total;o=100*n/i}else o=100;return this.emit("totaluploadprogress",o,i,n)},i.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},i.prototype.getFallbackForm=function(){var e,t,n,o;return(e=this.getExistingFallback())?e:(n='<div class="dz-fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=i.createElement(n),"FORM"!==this.element.tagName?(o=i.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),o.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=o?o:t)},i.prototype.getExistingFallback=function(){var e,t,i,n,o,s;for(t=function(e){var t,i,n;for(i=0,n=e.length;n>i;i++)if(t=e[i],/(^| )fallback($| )/.test(t.className))return t},s=["div","form"],n=0,o=s.length;o>n;n++)if(i=s[n],e=t(this.element.getElementsByTagName(i)))return e},i.prototype.setupEventListeners=function(){var e,t,i,n,o,s,r;for(s=this.listeners,r=[],n=0,o=s.length;o>n;n++)e=s[n],r.push(function(){var n,o;n=e.events,o=[];for(t in n)i=n[t],o.push(e.element.addEventListener(t,i,!1));return o}());return r},i.prototype.removeEventListeners=function(){var e,t,i,n,o,s,r;for(s=this.listeners,r=[],n=0,o=s.length;o>n;n++)e=s[n],r.push(function(){var n,o;n=e.events,o=[];for(t in n)i=n[t],o.push(e.element.removeEventListener(t,i,!1));return o}());return r},i.prototype.disable=function(){var e,t,i,n,o;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),n=this.files,o=[],t=0,i=n.length;i>t;t++)e=n[t],o.push(this.cancelUpload(e));return o},i.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},i.prototype.filesize=function(e){var t,i,n,o,s,r,a,l;for(r=["TB","GB","MB","KB","b"],n=o=null,i=a=0,l=r.length;l>a;i=++a)if(s=r[i],t=Math.pow(this.options.filesizeBase,4-i)/10,e>=t){n=e/Math.pow(this.options.filesizeBase,4-i),o=s;break}return n=Math.round(10*n)/10,"<strong>"+n+"</strong> "+o},i.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},i.prototype.drop=function(e){var t,i;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,t.length&&(i=e.dataTransfer.items,i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)))},i.prototype.paste=function(e){var t,i;if(null!=(null!=e&&null!=(i=e.clipboardData)?i.items:void 0))return this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},i.prototype.handleFiles=function(e){var t,i,n,o;for(o=[],i=0,n=e.length;n>i;i++)t=e[i],o.push(this.addFile(t));return o},i.prototype._addFilesFromItems=function(e){var t,i,n,o,s;for(s=[],n=0,o=e.length;o>n;n++)i=e[n],null!=i.webkitGetAsEntry&&(t=i.webkitGetAsEntry())?t.isFile?s.push(this.addFile(i.getAsFile())):t.isDirectory?s.push(this._addFilesFromDirectory(t,t.name)):s.push(void 0):null!=i.getAsFile&&(null==i.kind||"file"===i.kind)?s.push(this.addFile(i.getAsFile())):s.push(void 0);return s},i.prototype._addFilesFromDirectory=function(e,t){var i,n;return i=e.createReader(),n=function(e){return function(i){var n,o,s;for(o=0,s=i.length;s>o;o++)n=i[o],n.isFile?n.file(function(i){return e.options.ignoreHiddenFiles&&"."===i.name.substring(0,1)?void 0:(i.fullPath=""+t+"/"+i.name,e.addFile(i))}):n.isDirectory&&e._addFilesFromDirectory(n,""+t+"/"+n.name)}}(this),i.readEntries(n,function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0})},i.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):i.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},i.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=i.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(i){return i?(e.accepted=!1,t._errorProcessing([e],i)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},i.prototype.enqueueFiles=function(e){var t,i,n;for(i=0,n=e.length;n>i;i++)t=e[i],this.enqueueFile(t);return null},i.prototype.enqueueFile=function(e){if(e.status!==i.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return e.status=i.QUEUED,this.options.autoProcessQueue?setTimeout(function(e){return function(){return e.processQueue()}}(this),0):void 0},i.prototype._thumbnailQueue=[],i.prototype._processingThumbnail=!1,i.prototype._enqueueThumbnail=function(e){return this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)):void 0},i.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this)))},i.prototype.removeFile=function(e){return e.status===i.UPLOADING&&this.cancelUpload(e),this.files=a(this.files,e),this.emit("removedfile",e),0===this.files.length?this.emit("reset"):void 0},i.prototype.removeAllFiles=function(e){var t,n,o,s;for(null==e&&(e=!1),s=this.files.slice(),n=0,o=s.length;o>n;n++)t=s[n],(t.status!==i.UPLOADING||e)&&this.removeFile(t);return null},i.prototype.createThumbnail=function(e,t){var i;return i=new FileReader,i.onload=function(n){return function(){return"image/svg+xml"===e.type?(n.emit("thumbnail",e,i.result),void(null!=t&&t())):n.createThumbnailFromUrl(e,i.result,t)}}(this),i.readAsDataURL(e)},i.prototype.createThumbnailFromUrl=function(e,t,i){var n;return n=document.createElement("img"),n.onload=function(t){return function(){var o,r,a,l,c,d,u,h;return e.width=n.width,e.height=n.height,a=t.options.resize.call(t,e),null==a.trgWidth&&(a.trgWidth=a.optWidth),null==a.trgHeight&&(a.trgHeight=a.optHeight),o=document.createElement("canvas"),r=o.getContext("2d"),o.width=a.trgWidth,o.height=a.trgHeight,s(r,n,null!=(c=a.srcX)?c:0,null!=(d=a.srcY)?d:0,a.srcWidth,a.srcHeight,null!=(u=a.trgX)?u:0,null!=(h=a.trgY)?h:0,a.trgWidth,a.trgHeight),l=o.toDataURL("image/png"),t.emit("thumbnail",e,l),null!=i?i():void 0}}(this),null!=i&&(n.onerror=i),n.src=t},i.prototype.processQueue=function(){var e,t,i,n;if(t=this.options.parallelUploads,i=this.getUploadingFiles().length,e=i,!(i>=t)&&(n=this.getQueuedFiles(),n.length>0)){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,t-i));for(;t>e;){if(!n.length)return;this.processFile(n.shift()),e++}}},i.prototype.processFile=function(e){return this.processFiles([e])},i.prototype.processFiles=function(e){var t,n,o;for(n=0,o=e.length;o>n;n++)t=e[n],t.processing=!0,t.status=i.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},i.prototype._getFilesWithXhr=function(e){var t,i;return i=function(){var i,n,o,s;for(o=this.files,s=[],i=0,n=o.length;n>i;i++)t=o[i],t.xhr===e&&s.push(t);return s}.call(this)},i.prototype.cancelUpload=function(e){var t,n,o,s,r,a,l;if(e.status===i.UPLOADING){for(n=this._getFilesWithXhr(e.xhr),o=0,r=n.length;r>o;o++)t=n[o],t.status=i.CANCELED;for(e.xhr.abort(),s=0,a=n.length;a>s;s++)t=n[s],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else(l=e.status)!==i.ADDED&&l!==i.QUEUED||(e.status=i.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));return this.options.autoProcessQueue?this.processQueue():void 0},o=function(){var e,t;return t=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},i.prototype.uploadFile=function(e){return this.uploadFiles([e])},i.prototype.uploadFiles=function(e){var t,s,r,a,l,c,d,u,h,p,f,m,g,v,y,b,w,_,k,C,x,D,T,M,E,S,$,U,F,I,N,A,j,O;for(k=new XMLHttpRequest,C=0,M=e.length;M>C;C++)t=e[C],t.xhr=k;m=o(this.options.method,e),w=o(this.options.url,e),k.open(m,w,!0),k.withCredentials=!!this.options.withCredentials,y=null,r=function(i){return function(){var n,o,s;for(s=[],n=0,o=e.length;o>n;n++)t=e[n],s.push(i._errorProcessing(e,y||i.options.dictResponseError.replace("{{statusCode}}",k.status),k));return s}}(this),b=function(i){return function(n){var o,s,r,a,l,c,d,u,h;if(null!=n)for(s=100*n.loaded/n.total,r=0,c=e.length;c>r;r++)t=e[r],t.upload={progress:s,total:n.total,bytesSent:n.loaded};else{for(o=!0,s=100,a=0,d=e.length;d>a;a++)t=e[a],100===t.upload.progress&&t.upload.bytesSent===t.upload.total||(o=!1),t.upload.progress=s,t.upload.bytesSent=t.upload.total;if(o)return}for(h=[],l=0,u=e.length;u>l;l++)t=e[l],h.push(i.emit("uploadprogress",t,s,t.upload.bytesSent));return h}}(this),k.onload=function(t){return function(n){var o;if(e[0].status!==i.CANCELED&&4===k.readyState){if(y=k.responseText,k.getResponseHeader("content-type")&&~k.getResponseHeader("content-type").indexOf("application/json"))try{y=JSON.parse(y)}catch(s){n=s,y="Invalid JSON response from server."}return b(),200<=(o=k.status)&&300>o?t._finished(e,y,n):r()}}}(this),k.onerror=function(t){return function(){return e[0].status!==i.CANCELED?r():void 0}}(this),v=null!=(F=k.upload)?F:k,v.onprogress=b,c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&n(c,this.options.headers);for(a in c)l=c[a],k.setRequestHeader(a,l);if(s=new FormData,this.options.params){I=this.options.params;for(f in I)_=I[f],s.append(f,_)}for(x=0,E=e.length;E>x;x++)t=e[x],this.emit("sending",t,k,s);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,k,s),"FORM"===this.element.tagName)for(N=this.element.querySelectorAll("input, textarea, select, button"),D=0,S=N.length;S>D;D++)if(u=N[D],h=u.getAttribute("name"),p=u.getAttribute("type"),"SELECT"===u.tagName&&u.hasAttribute("multiple"))for(A=u.options,T=0,$=A.length;$>T;T++)g=A[T],g.selected&&s.append(h,g.value);else(!p||"checkbox"!==(j=p.toLowerCase())&&"radio"!==j||u.checked)&&s.append(h,u.value);for(d=U=0,O=e.length-1;O>=0?O>=U:U>=O;d=O>=0?++U:--U)s.append(this._getParamName(d),e[d],e[d].name);return k.send(s)},i.prototype._finished=function(e,t,n){var o,s,r;for(s=0,r=e.length;r>s;s++)o=e[s],o.status=i.SUCCESS,this.emit("success",o,t,n),this.emit("complete",o);return this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},i.prototype._errorProcessing=function(e,t,n){var o,s,r;for(s=0,r=e.length;r>s;s++)o=e[s],o.status=i.ERROR,this.emit("error",o,t,n),this.emit("complete",o);return this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},i}(t),e.version="4.0.1",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[i(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,i,n,o,s,r;for(document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],t=function(e){var t,i,o,s;for(s=[],i=0,o=e.length;o>i;i++)t=e[i],/(^| )dropzone($| )/.test(t.className)?s.push(n.push(t)):s.push(void 0);return s},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),r=[],o=0,s=n.length;s>o;o++)i=n[o],e.optionsForElement(i)!==!1?r.push(new e(i)):r.push(void 0);return r},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,i,n,o,s;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(s=e.blacklistedBrowsers,n=0,o=s.length;o>n;n++)i=s[n],i.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},a=function(e,t){var i,n,o,s;for(s=[],n=0,o=e.length;o>n;n++)i=e[n],i!==t&&s.push(i);return s},i=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var i;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType&&(i=e),null==i)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},e.getElements=function(e,t){var i,n,o,s,r,a,l,c;if(e instanceof Array){o=[];try{for(s=0,a=e.length;a>s;s++)n=e[s],o.push(this.getElement(n,t))}catch(d){i=d,o=null}}else if("string"==typeof e)for(o=[],c=document.querySelectorAll(e),r=0,l=c.length;l>r;r++)n=c[r],o.push(n);else null!=e.nodeType&&(o=[e]);if(null==o||!o.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return o},e.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},e.isValidFile=function(e,t){var i,n,o,s,r;if(!t)return!0;for(t=t.split(","),n=e.type,i=n.replace(/\/.*$/,""),s=0,r=t.length;r>s;s++)if(o=t[s],o=o.trim(),"."===o.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(o.toLowerCase(),e.name.length-o.length))return!0}else if(/\/\*$/.test(o)){if(i===o.replace(/\/.*$/,""))return!0}else if(n===o)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",o=function(e){var t,i,n,o,s,r,a,l,c,d;for(a=e.naturalWidth,r=e.naturalHeight,i=document.createElement("canvas"),i.width=1,i.height=r,n=i.getContext("2d"),n.drawImage(e,0,0),o=n.getImageData(0,0,1,r).data,d=0,s=r,l=r;l>d;)t=o[4*(l-1)+3],0===t?s=l:d=l,l=s+d>>1;return c=l/r,0===c?1:c},s=function(e,t,i,n,s,r,a,l,c,d){var u;return u=o(t),e.drawImage(t,i,n,s,r,a,l,c,d/u)},n=function(e,t){var i,n,o,s,r,a,l,c,d;if(o=!1,d=!0,n=e.document,c=n.documentElement,i=n.addEventListener?"addEventListener":"attachEvent",l=n.addEventListener?"removeEventListener":"detachEvent",a=n.addEventListener?"":"on",s=function(i){return"readystatechange"!==i.type||"complete"===n.readyState?(("load"===i.type?e:n)[l](a+i.type,s,!1),!o&&(o=!0)?t.call(e,i.type||i):void 0):void 0},r=function(){var e;try{c.doScroll("left")}catch(t){return e=t,void setTimeout(r,50)}return s("poll")},"complete"!==n.readyState){if(n.createEventObject&&c.doScroll){try{d=!e.frameElement}catch(u){}d&&r()}return n[i](a+"DOMContentLoaded",s,!1),n[i](a+"readystatechange",s,!1),e[i](a+"load",s,!1)}},e._autoDiscoverFunction=function(){return e.autoDiscover?e.discover():void 0},n(window,e._autoDiscoverFunction)}.call(this);var _editor={codemirror:function(e,t){var i=document.getElementById(e);"xml"==t&&(t={name:"xml",alignCDATA:!0}),"sql"==t&&(t="text/x-mariadb",window.location.href.indexOf("mime=")>-1&&(t=window.location.href.substr(window.location.href.indexOf("mime=")+5)));var n=CodeMirror.fromTextArea(i,{mode:t,gutters:["note-gutter","CodeMirror-linenumbers"],tabSize:4,indentUnit:4,lineNumbers:!0,lineWrapping:!0,tabMode:"indent",autofocus:!1,enterMode:"keep",smartyVersion:3,continueComments:"Enter",extraKeys:{"Ctrl-S":function(e){return saving(),!1},"Cmd-S":function(e){return saving(),!1},"Ctrl-Q":"toggleComment","Cmd-Q":"toggleComment"}});emmetCodeMirror(n)},init:function(e,t,i){"undefined"!=typeof this[t]&&this[t](e,i)}};!function(e){"use strict";var t=e("body");t.on("change",".j-select-choosen",function(t){var i=parseInt(e(this).val()),n=e(this).closest(".j-select-wrapper"),o=n.find(".j-select-container"),s=o.find("select");e.ajax({url:"/"+ADMIN_DIR+"/modules/fields",type:"POST",data:{id:i},success:function(e){if(e.length){var t;s.empty().prop("disabled",!1);for(t in e)is_undefined(e[t].sys_name)||s.append('<option value="'+e[t].sys_name+'">'+e[t].name+"</option>");s.trigger("chosen:updated")}},dataType:"JSON"})});var i=new Clipboard(".j-clipboard",{text:function(t){return e(t).addClass("copied"),setTimeout(function(){e(t).removeClass("copied")},700),t.getAttribute("data-clipboard")}});i.on("success",function(e){console.info("Action:",e.action),console.info("Text:",e.text),console.info("Trigger:",e.trigger),e.clearSelection()}),i.on("error",function(e){console.error("Action:",e.action),console.error("Trigger:",e.trigger)})}(jQuery);var d=document;Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)};var mapConteiner=function(e,t){"google"===e?googleMaps(t):"yandex"===e&&yandexMaps(t)},datepicker=function(){$(".calendar .selector").each(function(){var e=$(this).closest(".calendar").find("input"),t=e.is(":disabled"),i=e.data("timestamp")||!1,n=e.data("format")||"dd.mm.yyyy";i!==!1&&(n="dd.mm.yyyy"),t||($(this).data({"date-format":n.toLowerCase(),date:""}),$(this).BootDatepicker().on("changeDate",function(t){var n=$(this).data("date");i!==!1&&(n=new Date(n).getTime()/1e3),e.val(n)}))})};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t,i=navigator.userAgent,n=/iphone/i.test(i),o=/chrome/i.test(i),s=/android/i.test(i);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var i;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(i=this.createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),e=0-i.duplicate().moveStart("character",-1e5),t=e+i.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(i,r){var a,l,c,d,u,h,p,f;if(!i&&this.length>0){a=e(this[0]);var m=a.data(e.mask.dataName);return m?m():void 0}return r=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},r),l=e.mask.definitions,c=[],d=p=i.length,u=null,e.each(i.split(""),function(e,t){"?"==t?(p--,d=e):l[t]?(c.push(new RegExp(l[t])),null===u&&(u=c.length-1),d>e&&(h=c.length-1)):c.push(null)}),this.trigger("unmask").each(function(){function a(){if(r.completed){for(var e=u;h>=e;e++)if(c[e]&&E[e]===m(e))return;r.completed.call(M)}}function m(e){return r.placeholder.charAt(e<r.placeholder.length?e:0)}function g(e){for(;++e<p&&!c[e];);return e}function v(e){for(;--e>=0&&!c[e];);return e}function y(e,t){var i,n;if(!(0>e)){for(i=e,n=g(t);p>i;i++)if(c[i]){if(!(p>n&&c[i].test(E[n])))break;E[i]=E[n],E[n]=m(n),n=g(n)}D(),M.caret(Math.max(u,e))}}function b(e){var t,i,n,o;for(t=e,i=m(e);p>t;t++)if(c[t]){if(n=g(t),o=E[t],E[t]=i,!(p>n&&c[n].test(o)))break;i=o}}function w(){var e=M.val(),t=M.caret();if(e.length<f.length){for(T(!0);t.begin>0&&!c[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<u&&!c[t.begin];)t.begin++;M.caret(t.begin,t.begin)}else{for(T(!0);t.begin<p&&!c[t.begin];)t.begin++;M.caret(t.begin,t.begin)}a()}function _(){T(),M.val()!=$&&M.change()}function k(e){if(!M.prop("readonly")){var t,i,o,s=e.which||e.keyCode;f=M.val(),8===s||46===s||n&&127===s?(t=M.caret(),i=t.begin,o=t.end,o-i===0&&(i=46!==s?v(i):o=g(i-1),o=46===s?g(o):o),x(i,o),y(i,o-1),e.preventDefault()):13===s?_.call(this,e):27===s&&(M.val($),M.caret(0,T()),e.preventDefault())}}function C(t){if(!M.prop("readonly")){var i,n,o,r=t.which||t.keyCode,l=M.caret();if(!(t.ctrlKey||t.altKey||t.metaKey||32>r)&&r&&13!==r){if(l.end-l.begin!==0&&(x(l.begin,l.end),y(l.begin,l.end-1)),i=g(l.begin-1),p>i&&(n=String.fromCharCode(r),c[i].test(n))){if(b(i),E[i]=n,D(),o=g(i),s){var d=function(){e.proxy(e.fn.caret,M,o)()};setTimeout(d,0)}else M.caret(o);l.begin<=h&&a()}t.preventDefault()}}}function x(e,t){var i;for(i=e;t>i&&p>i;i++)c[i]&&(E[i]=m(i))}function D(){M.val(E.join(""))}function T(e){var t,i,n,o=M.val(),s=-1;for(t=0,n=0;p>t;t++)if(c[t]){for(E[t]=m(t);n++<o.length;)if(i=o.charAt(n-1),c[t].test(i)){E[t]=i,s=t;break}if(n>o.length){x(t+1,p);break}}else E[t]===o.charAt(n)&&n++,d>t&&(s=t);return e?D():d>s+1?r.autoclear||E.join("")===S?(M.val()&&M.val(""),x(0,p)):D():(D(),M.val(M.val().substring(0,s+1))),d?t:u}var M=e(this),E=e.map(i.split(""),function(e,t){return"?"!=e?l[e]?m(t):e:void 0}),S=E.join(""),$=M.val();M.data(e.mask.dataName,function(){return e.map(E,function(e,t){return c[t]&&e!=m(t)?e:null}).join("")}),M.one("unmask",function(){M.off(".mask").removeData(e.mask.dataName)}).on("focus.mask",function(){if(!M.prop("readonly")){clearTimeout(t);var e;$=M.val(),e=T(),t=setTimeout(function(){D(),e==i.replace("?","").length?M.caret(0,e):M.caret(e)},10)}}).on("blur.mask",_).on("keydown.mask",k).on("keypress.mask",C).on("input.mask paste.mask",function(){M.prop("readonly")||setTimeout(function(){var e=T(!0);M.caret(e),a()},0)}),o&&s&&M.off("input.mask").on("input.mask",w),T()})}})});var _redactor={imperavi:function(e){$("#"+e).redactor({lang:"ru",minHeight:10,maxHeight:650,buttonSource:!0,placeholder:"Содержимое блока...",tabAsSpaces:4,codemirror:!0,formatting:["p","div","blockquote","pre","h1","h2","h3","h4","h5","h6"],visual:!0,fixed:!0,toolbarFixed:!0,toolbarOverflow:!0,fullpage:!1,autoresize:!0,linebreaks:!1,cleanSpaces:!0,cleanOnPaste:!0,pastePlainText:!1,convertDivs:!1,removeComments:!0,cleanStyleOnEnter:!1,removeDataAttr:!0,observeLinks:!0,autoformat:!1,removeClasses:!0,removeStyles:!0,convertLinks:!0,convertUrlLinks:!1,removeEmptyTags:!1,convertImageLinks:!0,convertVideoLinks:!0,imageFloatMargin:"15px",buttonsHideOnMobile:["image","video"],replaceStyles:[["font-weight:s?bold","strong"],["font-weight:s?700","strong"],["font-style:s?italic","em"],["text-decoration:s?underline","u"]],removeEmpty:["strong","em","span"],plugins:["table","video","filemanager","limiter","fontcolor","fontsize","fontfamily","textdirection","imagemanager","definedlinks","counter","clips","fullscreen"],formattingAdd:[{tag:"h6",title:"Заголовок 6"}],replaceTags:[["strike","del"],["i","em"],["b","strong"],["big","strong"],["strike","del"]],deniedTags:["html","head","link","body","meta","applet","style","script","meta","link"],buttonsAdd:["pre","|"],activeButtonsAdd:{pre:"pre"},buttonsCustom:{pre:{title:"Code",callback:function(){this.formatBlocks("pre")}}},fileManagerJson:"/tests/files.json",fileUpload:"/apps/upload/file_upload.php",imageUpload:"/apps/upload/image_upload.php",clipboardUploadUrl:"/apps/upload/clipboard.php",css:"/css/main.min.css"}),CodeMirror.fromTextArea($("#"+e)[0],{mode:"htmlmixed",tabMode:"indent",tabSize:4,indentUnit:4,lineWrapping:!0,lineNumbers:!0})},tinymce:function(e){tinymce.init({selector:"#"+e,theme:"modern",plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern imagetools"],menubar:!0,image_advtab:!0,fullpage:!0,toolbar1:"code | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | insertfile link image",toolbar2:"styleselect | undo redo | hr removeformat | subscript superscript | forecolor backcolor",toolbar_items_size:"small",style_formats:[{title:"Bold text",inline:"b"},{title:"Red text",inline:"span",styles:{color:"#f00"}},{title:"Red header",block:"h1",styles:{color:"#f00"}},{title:"Example 1",inline:"span",classes:"example1"},{title:"Example 2",inline:"span",classes:"example2"},{title:"Table styles"},{title:"Table row 1",selector:"tr",classes:"tablerow1"}],visualblocks_default_state:!1,end_container_on_empty_block:!0,content_css:["//fast.fonts.net/cssapi/e6dc9b99-64fe-4292-ad98-6974f93cd2a2.css","//www.tinymce.com/css/codepen.min.css"]})},cleditor:function(e){$("#"+e).cleditor()},ckeditor:function(e){CKEDITOR.replace(e,{customConfig:"/apps/wysiwyg/ckeditor/config.js"})},wysiwyg:function(e){$("#"+e).wysiwyg({toolbar:"top",hotKeys:{"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo"}})},init:function(e,t){"undefined"!=typeof this[t]&&this[t](e)}};!function(e,t,i,n){function o(e,t){var i=Math.max(0,e[0]-t[0],t[0]-e[1]),n=Math.max(0,e[2]-t[1],t[1]-e[3]);return i+n}function s(t,i,n,o){var s=t.length,r=o?"offset":"position";for(n=n||0;s--;){var a=t[s].el?t[s].el:e(t[s]),l=a[r]();l.left+=parseInt(a.css("margin-left"),10),l.top+=parseInt(a.css("margin-top"),10),i[s]=[l.left-n,l.left+a.outerWidth()+n,l.top-n,l.top+a.outerHeight()+n]}}function r(e,t){var i=t.offset();return{left:e.left-i.left,top:e.top-i.top}}function a(e,t,i){t=[t.left,t.top],i=i&&[i.left,i.top];for(var n,s=e.length,r=[];s--;)n=e[s],r[s]=[s,o(n,t),i&&o(n,i)];return r=r.sort(function(e,t){return t[1]-e[1]||t[2]-e[2]||t[0]-e[0]})}function l(t){this.options=e.extend({},u,t),this.containers=[],this.options.rootGroup||(this.scrollProxy=e.proxy(this.scroll,this),this.dragProxy=e.proxy(this.drag,this),this.dropProxy=e.proxy(this.drop,this),this.placeholder=e(this.options.placeholder),t.isValidTarget||(this.options.isValidTarget=n))}function c(t,i){this.el=t,this.options=e.extend({},d,i),this.group=l.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var n=this.rootGroup.options.itemPath;this.target=n?this.el.find(n):this.el,this.target.on(m.start,this.handle,e.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var d={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},u={afterMove:function(e,t,i){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",isValidTarget:function(e,t){return!0},onCancel:function(e,t,i,n){},onDrag:function(e,t,i,n){e.css(t)},onDragStart:function(t,i,n,o){t.css({height:t.outerHeight(),width:t.outerWidth()}),t.addClass(i.group.options.draggedClass),e("body").addClass(i.group.options.bodyClass)},onDrop:function(t,i,n,o){t.removeClass(i.group.options.draggedClass).removeAttr("style"),e("body").removeClass(i.group.options.bodyClass)},onMousedown:function(e,t,i){return i.target.nodeName.match(/^(input|select|textarea)$/i)?void 0:(i.preventDefault(),!0)},placeholderClass:"placeholder",placeholder:'<li class="placeholder"></li>',pullPlaceholder:!0,serialize:function(t,i,n){var o=e.extend({},t.data());
return n?[i]:(i[0]&&(o.children=i),delete o.subContainers,delete o.sortable,o)},tolerance:0},h={},p=0,f={left:0,top:0,bottom:0,right:0},m={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},g="subContainers";l.get=function(e){return h[e.group]||(e.group===n&&(e.group=p++),h[e.group]=new l(e)),h[e.group]},l.prototype={dragInit:function(t,i){this.$document=e(i.el[0].ownerDocument);var n=e(t.target).closest(this.options.itemSelector);if(n.length){if(this.item=n,this.itemContainer=i,this.item.is(this.options.exclude)||!this.options.onMousedown(this.item,u.onMousedown,t))return;this.setPointer(t),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0}},drag:function(e){if(!this.dragging){if(!this.distanceMet(e)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,u.onDragStart,e),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(e),this.options.onDrag(this.item,r(this.pointer,this.item.offsetParent()),u.onDrag,e);var t=this.getPointer(e),i=this.sameResultBox,o=this.options.tolerance;(!i||i.top-o>t.top||i.bottom+o<t.top||i.left-o>t.left||i.right+o<t.left)&&(this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=n))},drop:function(e){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,u.onCancel,e),this.options.onDrop(this.item,this.getContainer(this.item),u.onDrop,e),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=n,this.dragging=!1)},searchValidTarget:function(e,t){e||(e=this.relativePointer||this.pointer,t=this.lastRelativePointer||this.lastPointer);for(var i=a(this.getContainerDimensions(),e,t),o=i.length;o--;){var s=i[o][0],l=i[o][1];if(!l||this.options.pullPlaceholder){var c=this.containers[s];if(!c.disabled){if(!this.$getOffsetParent()){var d=c.getItemOffsetParent();e=r(e,d),t=r(t,d)}if(c.searchValidTarget(e,t))return!0}}}this.sameResultBox&&(this.sameResultBox=n)},movePlaceholder:function(e,t,i,n){var o=this.lastAppendedItem;!n&&o&&o[0]===t[0]||(t[i](this.placeholder),this.lastAppendedItem=t,this.sameResultBox=n,this.options.afterMove(this.placeholder,e,t))},getContainerDimensions:function(){return this.containerDimensions||s(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(e){return e.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===n){var e=this.containers.length-1,t=this.containers[e].getItemOffsetParent();if(!this.options.rootGroup)for(;e--;)if(t[0]!=this.containers[e].getItemOffsetParent()[0]){t=!1;break}this.offsetParent=t}return this.offsetParent},setPointer:function(e){var t=this.getPointer(e);if(this.$getOffsetParent()){var i=r(t,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=i}this.lastPointer=this.pointer,this.pointer=t},distanceMet:function(e){var t=this.getPointer(e);return Math.max(Math.abs(this.pointer.left-t.left),Math.abs(this.pointer.top-t.top))>=this.options.distance},getPointer:function(e){var t=e.originalEvent||e.originalEvent.touches&&e.originalEvent.touches[0];return{left:e.pageX||t.pageX,top:e.pageY||t.pageY}},setupDelayTimer:function(){var e=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){e.delayMet=!0},this.options.delay))},scroll:function(e){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(t){var i=this,n=["drag","drop","scroll"];e.each(n,function(e,n){i.$document[t](m[n],i[n+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=n},clearDimensions:function(){this.traverse(function(e){e._clearDimensions()})},traverse:function(e){e(this);for(var t=this.containers.length;t--;)this.containers[t].traverse(e)},_clearDimensions:function(){this.containerDimensions=n},_destroy:function(){h[this.options.group]=n}},c.prototype={dragInit:function(e){var t=this.rootGroup;!this.disabled&&!t.dragInitDone&&this.options.drag&&this.isValidDrag(e)&&t.dragInit(e,this)},isValidDrag:function(e){return 1==e.which||"touchstart"==e.type&&1==e.originalEvent.touches.length},searchValidTarget:function(e,t){var i=a(this.getItemDimensions(),e,t),n=i.length,o=this.rootGroup,s=!o.options.isValidTarget||o.options.isValidTarget(o.item,this);if(!n&&s)return o.movePlaceholder(this,this.target,"append"),!0;for(;n--;){var r=i[n][0],l=i[n][1];if(!l&&this.hasChildGroup(r)){var c=this.getContainerGroup(r).searchValidTarget(e,t);if(c)return!0}else if(s)return this.movePlaceholder(r,e),!0}},movePlaceholder:function(t,i){var n=e(this.items[t]),o=this.itemDimensions[t],s="after",r=n.outerWidth(),a=n.outerHeight(),l=n.offset(),c={left:l.left,right:l.left+r,top:l.top,bottom:l.top+a};if(this.options.vertical){var d=(o[2]+o[3])/2,u=i.top<=d;u?(s="before",c.bottom-=a/2):c.top+=a/2}else{var h=(o[0]+o[1])/2,p=i.left<=h;p?(s="before",c.right-=r/2):c.left+=r/2}this.hasChildGroup(t)&&(c=f),this.rootGroup.movePlaceholder(this,n,s,c)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),s(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var e,t=this.el;return e="relative"===t.css("position")||"absolute"===t.css("position")||"fixed"===t.css("position")?t:t.offsetParent()},hasChildGroup:function(e){return this.options.nested&&this.getContainerGroup(e)},getContainerGroup:function(t){var o=e.data(this.items[t],g);if(o===n){var s=this.$getChildren(this.items[t],"container");if(o=!1,s[0]){var r=e.extend({},this.options,{rootGroup:this.rootGroup,group:p++});o=s[i](r).data(i).group}e.data(this.items[t],g,o)}return o},$getChildren:function(t,i){var n=this.rootGroup.options,o=n[i+"Path"],s=n[i+"Selector"];return t=e(t),o&&(t=t.find(o)),t.children(s)},_serialize:function(t,i){var n=this,o=i?"item":"container",s=this.$getChildren(t,o).not(this.options.exclude).map(function(){return n._serialize(e(this),!i)}).get();return this.rootGroup.options.serialize(t,s,i)},traverse:function(t){e.each(this.items||[],function(i){var n=e.data(this,g);n&&n.traverse(t)}),t(this)},_clearDimensions:function(){this.itemDimensions=n},_destroy:function(){var t=this;this.target.off(m.start,this.handle),this.el.removeData(i),this.options.drop&&(this.group.containers=e.grep(this.group.containers,function(e){return e!=t})),e.each(this.items||[],function(){e.removeData(this,g)})}};var v={enable:function(){this.traverse(function(e){e.disabled=!1})},disable:function(){this.traverse(function(e){e.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(e){e._clearDimensions()})},destroy:function(){this.traverse(function(e){e._destroy()})}};e.extend(c.prototype,v),e.fn[i]=function(t){var o=Array.prototype.slice.call(arguments,1);return this.map(function(){var s=e(this),r=s.data(i);return r&&v[t]?v[t].apply(r,o)||this:(r||t!==n&&"object"!=typeof t||s.data(i,new c(s,t)),this)})}}(jQuery,window,"sortable"),$(document).ready(function(){$.upload={open:function(e,t,i,n){clearInterval(uploadOpenTimeout),uploadOpenTimeout=setTimeout(function(){upload._open(e,t,i,n)},200)},clearErrors:function(e){e.find(".error").removeClass("error"),e.find(".upload__errorList").addClass("hide").empty(),e.find(".hide-on-open").hide(),e.find(".tooltip").remove()}},$.upload.init=function(){var e,t,i,n,o,s=$(".js-dropzone-template").html(),r="/"+ADMIN_DIR+"/meta/fileUpload",a=$('meta[name="csrf-token"]').attr("content"),l=0;Dropzone.autoDiscover=!1,$(".js-fileupload").each(function(c){return function(c){$myDropzone=$(c),$myDropzone.data("action")&&(r=$myDropzone.data("action")),t=$myDropzone.attr("id"),e=null,l=parseInt($myDropzone.find(".js-fileupload-count").val()),0==l&&(e=1);new Dropzone("#"+t,{url:r,paramName:"file",previewTemplate:s,acceptedFiles:"image/*",maxFiles:e,clickable:"#"+t+"-target",previewsContainer:"#"+t+"-preview",headers:{"X-CSRF-TOKEN":a},parallelUploads:2,init:function(){this.on("success",function(e,t){console.log("success")})},maxfilesexceeded:function(e){cp.notify("Можно загрузить только 1 файл")},sending:function(e,t,s){console.log(this.element),i=$(this.element).find(".js-fileupload-group").val(),n=$(this.element).find(".js-fileupload-settings").val(),o=$(this.element).find(".js-fileupload-group").attr("name"),s.append("name",o),s.append("groupid",i),s.append("settings",n)},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(var i=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),n="",o=0;o<i.length;o++){n=e.name.split("."),n=n[n.length-1],console.log(e.name,n),t="/"+ADMIN_DIR+"/images/ff/"+n+".svg";var s=i[o];s.alt=e.name,s.src=t}setTimeout(function(){e.previewElement.classList.add("dz-image-preview")},1)}},uploadprogress:function(e,t,i){100==t&&$(e.previewElement).find(".dz-progress").fadeOut(300,function(){$(this).remove()})}})}(this)})}}),function(e){"use strict";e.console=e.console||{};for(var t,i,n=e.console,o={},s=function(){},r="memory".split(","),a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=r.pop();)n[t]||(n[t]=o);for(;i=a.pop();)n[i]||(n[i]=s)}("undefined"==typeof window?this:window),!function(){function e(e,t){var i='font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;font-size: 14px;'+(e?"font-weight: bold;":"")+"color: "+t+";";return i}navigator.userAgent.toLowerCase().indexOf("chrome")>-1?console.log("%c♥ %c✰ %cCELEBRO.CMS %c✰ %c http://cms.celebro.ru %c♥",e(!0,"#f00"),e(!0,"#af55e2"),e(!0,"#777"),e(!0,"#af55e2"),e(!0,"#557de2"),e(!0,"#f00")):console.log("celebro.cms http://cms.celebro.ru")}(),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return a.raw?e:encodeURIComponent(e)}function i(e){return a.raw?e:decodeURIComponent(e)}function n(e){return t(a.json?JSON.stringify(e):String(e))}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(r," ")),a.json?JSON.parse(e):e}catch(t){}}function s(t,i){var n=a.raw?t:o(t);return e.isFunction(i)?i(n):n}var r=/\+/g,a=e.cookie=function(o,r,l){if(arguments.length>1&&!e.isFunction(r)){if(l=e.extend({},a.defaults,l),"number"==typeof l.expires){var c=l.expires,d=l.expires=new Date;d.setTime(+d+864e5*c)}return document.cookie=[t(o),"=",n(r),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var u=o?void 0:{},h=document.cookie?document.cookie.split("; "):[],p=0,f=h.length;f>p;p++){var m=h[p].split("="),g=i(m.shift()),v=m.join("=");if(o&&o===g){u=s(v,r);break}o||void 0===(v=s(v))||(u[g]=v)}return u};a.defaults={},e.removeCookie=function(t,i){return void 0===e.cookie(t)?!1:(e.cookie(t,"",e.extend({},i,{expires:-1})),!e.cookie(t))}}),$(window).load(function(){$.app.init()});var d=document;jQuery.browser={},jQuery.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),jQuery.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),jQuery.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),jQuery.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),function(e){e.fn.timeoutClass=function(t,i){i=i||10;var n=this;setTimeout(function(){e(n).toggleClass(t)},i)}}(jQuery),$(document).ready(function(){selectize(),datepicker(),metaCounter(),seoCrowl(),keyControls(),on_load(),cp.dropdown(),cp.tableToggleList(),cp.cleditor()}),function(e){"use strict";function t(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}function i(e,t){return e<<t|e>>>32-t}function n(e,n,o,s,r,a){return t(i(t(t(n,e),t(s,a)),r),o)}function o(e,t,i,o,s,r,a){return n(t&i|~t&o,e,t,s,r,a)}function s(e,t,i,o,s,r,a){return n(t&o|i&~o,e,t,s,r,a)}function r(e,t,i,o,s,r,a){return n(t^i^o,e,t,s,r,a)}function a(e,t,i,o,s,r,a){return n(i^(t|~o),e,t,s,r,a)}function l(e,i){e[i>>5]|=128<<i%32,e[(i+64>>>9<<4)+14]=i;var n,l,c,d,u,h=1732584193,p=-271733879,f=-1732584194,m=271733878;for(n=0;n<e.length;n+=16)l=h,c=p,d=f,u=m,h=o(h,p,f,m,e[n],7,-680876936),m=o(m,h,p,f,e[n+1],12,-389564586),f=o(f,m,h,p,e[n+2],17,606105819),p=o(p,f,m,h,e[n+3],22,-1044525330),h=o(h,p,f,m,e[n+4],7,-176418897),m=o(m,h,p,f,e[n+5],12,1200080426),f=o(f,m,h,p,e[n+6],17,-1473231341),p=o(p,f,m,h,e[n+7],22,-45705983),h=o(h,p,f,m,e[n+8],7,1770035416),m=o(m,h,p,f,e[n+9],12,-1958414417),f=o(f,m,h,p,e[n+10],17,-42063),p=o(p,f,m,h,e[n+11],22,-1990404162),h=o(h,p,f,m,e[n+12],7,1804603682),m=o(m,h,p,f,e[n+13],12,-40341101),f=o(f,m,h,p,e[n+14],17,-1502002290),p=o(p,f,m,h,e[n+15],22,1236535329),h=s(h,p,f,m,e[n+1],5,-165796510),m=s(m,h,p,f,e[n+6],9,-1069501632),f=s(f,m,h,p,e[n+11],14,643717713),p=s(p,f,m,h,e[n],20,-373897302),h=s(h,p,f,m,e[n+5],5,-701558691),m=s(m,h,p,f,e[n+10],9,38016083),f=s(f,m,h,p,e[n+15],14,-660478335),p=s(p,f,m,h,e[n+4],20,-405537848),h=s(h,p,f,m,e[n+9],5,568446438),m=s(m,h,p,f,e[n+14],9,-1019803690),f=s(f,m,h,p,e[n+3],14,-187363961),p=s(p,f,m,h,e[n+8],20,1163531501),h=s(h,p,f,m,e[n+13],5,-1444681467),m=s(m,h,p,f,e[n+2],9,-51403784),f=s(f,m,h,p,e[n+7],14,1735328473),p=s(p,f,m,h,e[n+12],20,-1926607734),h=r(h,p,f,m,e[n+5],4,-378558),m=r(m,h,p,f,e[n+8],11,-2022574463),f=r(f,m,h,p,e[n+11],16,1839030562),p=r(p,f,m,h,e[n+14],23,-35309556),h=r(h,p,f,m,e[n+1],4,-1530992060),m=r(m,h,p,f,e[n+4],11,1272893353),f=r(f,m,h,p,e[n+7],16,-155497632),p=r(p,f,m,h,e[n+10],23,-1094730640),h=r(h,p,f,m,e[n+13],4,681279174),m=r(m,h,p,f,e[n],11,-358537222),f=r(f,m,h,p,e[n+3],16,-722521979),p=r(p,f,m,h,e[n+6],23,76029189),h=r(h,p,f,m,e[n+9],4,-640364487),m=r(m,h,p,f,e[n+12],11,-421815835),f=r(f,m,h,p,e[n+15],16,530742520),p=r(p,f,m,h,e[n+2],23,-995338651),h=a(h,p,f,m,e[n],6,-198630844),m=a(m,h,p,f,e[n+7],10,1126891415),f=a(f,m,h,p,e[n+14],15,-1416354905),p=a(p,f,m,h,e[n+5],21,-57434055),h=a(h,p,f,m,e[n+12],6,1700485571),m=a(m,h,p,f,e[n+3],10,-1894986606),f=a(f,m,h,p,e[n+10],15,-1051523),p=a(p,f,m,h,e[n+1],21,-2054922799),h=a(h,p,f,m,e[n+8],6,1873313359),m=a(m,h,p,f,e[n+15],10,-30611744),f=a(f,m,h,p,e[n+6],15,-1560198380),p=a(p,f,m,h,e[n+13],21,1309151649),h=a(h,p,f,m,e[n+4],6,-145523070),m=a(m,h,p,f,e[n+11],10,-1120210379),f=a(f,m,h,p,e[n+2],15,718787259),p=a(p,f,m,h,e[n+9],21,-343485551),h=t(h,l),p=t(p,c),f=t(f,d),m=t(m,u);return[h,p,f,m]}function c(e){var t,i="";for(t=0;t<32*e.length;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function d(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;for(t=0;t<8*e.length;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function u(e){return c(l(d(e),8*e.length))}function h(e,t){var i,n,o=d(e),s=[],r=[];for(s[15]=r[15]=void 0,o.length>16&&(o=l(o,8*e.length)),i=0;16>i;i+=1)s[i]=909522486^o[i],r[i]=1549556828^o[i];return n=l(s.concat(d(t)),512+8*t.length),c(l(r.concat(n),640))}function p(e){var t,i,n="0123456789abcdef",o="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),o+=n.charAt(t>>>4&15)+n.charAt(15&t);return o}function f(e){return unescape(encodeURIComponent(e))}function m(e){return u(f(e))}function g(e){return p(m(e))}function v(e,t){return h(f(e),f(t))}function y(e,t){return p(v(e,t))}function b(e,t,i){return t?i?v(t,e):y(t,e):i?m(e):g(e)}"function"==typeof define&&define.amd?define(function(){return b}):e.md5=b}(this),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){function t(e){return"function"==typeof e}function i(e){return m(e)?"array":typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}function s(e,t){return g.call(e,t)}function r(e){return!s(v,e)}function a(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return y[e]})}function l(t,i){function o(){if(v&&!y)for(;g.length;)delete f[g.pop()];else g=[];v=!1,y=!1}function s(e){if("string"==typeof e&&(e=e.split(w,2)),!m(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(n(e[0])+"\\s*"),l=new RegExp("\\s*"+n(e[1])),h=new RegExp("\\s*"+n("}"+e[1]))}if(!t)return[];var a,l,h,p=[],f=[],g=[],v=!1,y=!1;s(i||e.tags);for(var x,D,T,M,E,S,$=new u(t);!$.eos();){if(x=$.pos,T=$.scanUntil(a))for(var U=0,F=T.length;F>U;++U)M=T.charAt(U),r(M)?g.push(f.length):y=!0,f.push(["text",M,x,x+1]),x+=1,"\n"===M&&o();if(!$.scan(a))break;if(v=!0,D=$.scan(C)||"name",$.scan(b),"="===D?(T=$.scanUntil(_),$.scan(_),$.scanUntil(l)):"{"===D?(T=$.scanUntil(h),$.scan(k),$.scanUntil(l),D="&"):T=$.scanUntil(l),!$.scan(l))throw new Error("Unclosed tag at "+$.pos);if(E=[D,T,x,$.pos],f.push(E),"#"===D||"^"===D)p.push(E);else if("/"===D){if(S=p.pop(),!S)throw new Error('Unopened section "'+T+'" at '+x);if(S[1]!==T)throw new Error('Unclosed section "'+S[1]+'" at '+x)}else"name"===D||"{"===D||"&"===D?y=!0:"="===D&&s(T)}if(S=p.pop())throw new Error('Unclosed section "'+S[1]+'" at '+$.pos);return d(c(f))}function c(e){for(var t,i,n=[],o=0,s=e.length;s>o;++o)t=e[o],t&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(n.push(t),i=t));return n}function d(e){for(var t,i,n=[],o=n,s=[],r=0,a=e.length;a>r;++r)switch(t=e[r],t[0]){case"#":case"^":o.push(t),s.push(t),o=t[4]=[];break;case"/":i=s.pop(),i[5]=t[2],o=s.length>0?s[s.length-1][4]:n;break;default:o.push(t)}return n}function u(e){this.string=e,this.tail=e,this.pos=0}function h(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function p(){this.cache={}}var f=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===f.call(e)},g=RegExp.prototype.test,v=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},b=/\s*/,w=/\s+/,_=/\s*=/,k=/\s*\}/,C=/#|\^|\/|>|\{|&|=|!/;u.prototype.eos=function(){return""===this.tail},u.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},u.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},h.prototype.push=function(e){return new h(e,this)},h.prototype.lookup=function(e){var i,n=this.cache;if(n.hasOwnProperty(e))i=n[e];else{for(var s,r,a=this,l=!1;a;){if(e.indexOf(".")>0)for(i=a.view,s=e.split("."),r=0;null!=i&&r<s.length;)r===s.length-1&&(l=o(i,s[r])),i=i[s[r++]];else i=a.view[e],l=o(a.view,e);if(l)break;a=a.parent}n[e]=i}return t(i)&&(i=i.call(this.view)),i},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(e,t){var i=this.cache,n=i[e];return null==n&&(n=i[e]=l(e,t)),n},p.prototype.render=function(e,t,i){var n=this.parse(e),o=t instanceof h?t:new h(t);return this.renderTokens(n,o,i,e)},p.prototype.renderTokens=function(e,t,i,n){for(var o,s,r,a="",l=0,c=e.length;c>l;++l)r=void 0,o=e[l],s=o[0],"#"===s?r=this.renderSection(o,t,i,n):"^"===s?r=this.renderInverted(o,t,i,n):">"===s?r=this.renderPartial(o,t,i,n):"&"===s?r=this.unescapedValue(o,t):"name"===s?r=this.escapedValue(o,t):"text"===s&&(r=this.rawValue(o)),void 0!==r&&(a+=r);return a},p.prototype.renderSection=function(e,i,n,o){function s(e){return r.render(e,i,n)}var r=this,a="",l=i.lookup(e[1]);if(l){if(m(l))for(var c=0,d=l.length;d>c;++c)a+=this.renderTokens(e[4],i.push(l[c]),n,o);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)a+=this.renderTokens(e[4],i.push(l),n,o);else if(t(l)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");l=l.call(i.view,o.slice(e[3],e[5]),s),null!=l&&(a+=l)}else a+=this.renderTokens(e[4],i,n,o);return a}},p.prototype.renderInverted=function(e,t,i,n){var o=t.lookup(e[1]);return!o||m(o)&&0===o.length?this.renderTokens(e[4],t,i,n):void 0},p.prototype.renderPartial=function(e,i,n){if(n){var o=t(n)?n(e[1]):n[e[1]];return null!=o?this.renderTokens(this.parse(o),i,n,o):void 0}},p.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);return null!=i?i:void 0},p.prototype.escapedValue=function(t,i){var n=i.lookup(t[1]);return null!=n?e.escape(n):void 0},p.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.2.1",e.tags=["{{","}}"];var x=new p;e.clearCache=function(){return x.clearCache()},e.parse=function(e,t){return x.parse(e,t)},e.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+i(e)+'" was given as the first argument for mustache#render(template, view, partials)');return x.render(e,t,n)},e.to_html=function(i,n,o,s){var r=e.render(i,n,o);return t(s)?void s(r):r},e.escape=a,e.Scanner=u,e.Context=h,e.Writer=p}),function(e){function t(t,i){return null!==e.getElementById(t)?(i=i||{},Mustache.render(e.getElementById(t).innerHTML,i)):""}window.template=t}(document),function(e,t,i,n){function o(t,n){this.w=e(i),this.el=e(t),this.options=e.extend({},a,n),this.init()}var s="ontouchstart"in i,r=function(){var e=i.createElement("div"),n=i.documentElement;if(!("pointerEvents"in e.style))return!1;e.style.pointerEvents="auto",e.style.pointerEvents="x",n.appendChild(e);var o=t.getComputedStyle&&"auto"===t.getComputedStyle(e,"").pointerEvents;return n.removeChild(e),!!o}(),a={listNodeName:"ol",itemNodeName:"li",rootClass:"dd",listClass:"dd-list",itemClass:"dd-item",dragClass:"dd-dragel",handleClass:"dd-handle",collapsedClass:"dd-collapsed",placeClass:"dd-placeholder",noDragClass:"dd-nodrag",emptyClass:"dd-empty",expandBtnHTML:'<button data-action="expand" type="button" class="dd-button dd-button__expand"></button>',collapseBtnHTML:'<button data-action="collapse" type="button" class="dd-button dd-button__collapse"></button>',group:0,maxDepth:5,threshold:20,dragStop:null,afterExpand:null,afterCollapse:null};o.prototype={init:function(){var i=this;i.reset(),i.el.data("nestable-group",this.options.group),i.placeEl=e('<div class="'+i.options.placeClass+'"/>'),e.each(this.el.find(i.options.itemNodeName),function(t,n){i.setParent(e(n))}),i.el.on("click","button",function(t){if(!i.dragEl){var n=e(t.currentTarget),o=n.data("action"),s=n.parent(i.options.itemNodeName);"collapse"===o&&i.collapseItem(s),"expand"===o&&i.expandItem(s)}});var n=function(t){var n=e(t.target);if(!n.hasClass(i.options.handleClass)){if(n.closest("."+i.options.noDragClass).length)return;n=n.closest("."+i.options.handleClass)}n.length&&!i.dragEl&&(i.isTouch=/^touch/.test(t.type),i.isTouch&&1!==t.touches.length||(t.preventDefault(),i.dragStart(t.touches?t.touches[0]:t)))},o=function(e){i.dragEl&&(e.preventDefault(),i.dragMove(e.touches?e.touches[0]:e))},r=function(e){i.dragEl&&(e.preventDefault(),i.dragStop(e.touches?e.touches[0]:e))};s&&(i.el[0].addEventListener("touchstart",n,!1),t.addEventListener("touchmove",o,!1),t.addEventListener("touchend",r,!1),t.addEventListener("touchcancel",r,!1)),i.el.on("mousedown",n),i.w.on("mousemove",o),i.w.on("mouseup",r)},serialize:function(){var t,i=0,n=this;return step=function(t,i){var o=[],s=t.children(n.options.itemNodeName);return s.each(function(){var t=e(this),s=e.extend({},t.data()),r=t.children(n.options.listNodeName);r.length&&(s.children=step(r,i+1)),o.push(s)}),o},t=step(n.el.find(n.options.listNodeName).first(),i)},serialise:function(){return this.serialize()},reset:function(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0},this.isTouch=!1,this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.hasNewRoot=!1,this.pointEl=null},expandItem:function(e){e.removeClass(this.options.collapsedClass),e.children('[data-action="expand"]').hide(),e.children('[data-action="collapse"]').show(),e.children(this.options.listNodeName).show(),"function"==typeof this.options.afterExpand&&this.options.afterExpand(e)},collapseItem:function(e){var t=e.children(this.options.listNodeName);t.length&&(e.addClass(this.options.collapsedClass),e.children('[data-action="collapse"]').hide(),e.children('[data-action="expand"]').show(),e.children(this.options.listNodeName).hide()),"function"==typeof this.options.afterCollapse&&this.options.afterCollapse(e)},expandAll:function(){var t=this;t.el.find(t.options.itemNodeName).each(function(){t.expandItem(e(this))})},collapseAll:function(){var t=this;t.el.find(t.options.itemNodeName).each(function(){t.collapseItem(e(this))})},setParent:function(t){t.children(this.options.listNodeName).length&&(t.find(".dd-button__expand").length||t.prepend(e(this.options.expandBtnHTML)),t.find(".dd-button__collapse").length||t.prepend(e(this.options.collapseBtnHTML))),e(t[0]).hasClass("dd-collapsed")?t.children('[data-action="collapse"]').hide():t.children('[data-action="expand"]').hide()},unsetParent:function(e){e.removeClass(this.options.collapsedClass),e.children("[data-action]").remove(),e.children(this.options.listNodeName).remove()},dragStart:function(t){var o=this.mouse,s=e(t.target),r=s.closest(this.options.itemNodeName);this.placeEl.css("height",r.height()),o.offsetX=t.offsetX!==n?t.offsetX:t.pageX-s.offset().left,o.offsetY=t.offsetY!==n?t.offsetY:t.pageY-s.offset().top,o.startX=o.lastX=t.pageX,o.startY=o.lastY=t.pageY,this.dragRootEl=this.el,this.dragEl=e(i.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",r.width()),r.after(this.placeEl),r[0].parentNode.removeChild(r[0]),r.appendTo(this.dragEl),e(i.body).append(this.dragEl),this.dragEl.css({left:t.pageX-o.offsetX,top:t.pageY-o.offsetY});var a,l,c=this.dragEl.find(this.options.itemNodeName);for(a=0;a<c.length;a++)l=e(c[a]).parents(this.options.listNodeName).length,l>this.dragDepth&&(this.dragDepth=l)},dragStop:function(e){var t=this.dragEl.children(this.options.itemNodeName).first();t[0].parentNode.removeChild(t[0]),this.placeEl.replaceWith(t),this.dragEl.remove(),this.el.trigger("change"),this.hasNewRoot&&this.dragRootEl.trigger("change"),this.reset(),"function"==typeof this.options.dragStop&&this.options.dragStop(t)},dragMove:function(n){var o,s,a,l,c,d=this.options,u=this.mouse;this.dragEl.css({left:n.pageX-u.offsetX,top:n.pageY-u.offsetY}),u.lastX=u.nowX,u.lastY=u.nowY,u.nowX=n.pageX,u.nowY=n.pageY,u.distX=u.nowX-u.lastX,u.distY=u.nowY-u.lastY,u.lastDirX=u.dirX,u.lastDirY=u.dirY,u.dirX=0===u.distX?0:u.distX>0?1:-1,u.dirY=0===u.distY?0:u.distY>0?1:-1;var h=Math.abs(u.distX)>Math.abs(u.distY)?1:0;if(!u.moving)return u.dirAx=h,void(u.moving=!0);u.dirAx!==h?(u.distAxX=0,u.distAxY=0):(u.distAxX+=Math.abs(u.distX),0!==u.dirX&&u.dirX!==u.lastDirX&&(u.distAxX=0),u.distAxY+=Math.abs(u.distY),0!==u.dirY&&u.dirY!==u.lastDirY&&(u.distAxY=0)),u.dirAx=h,u.dirAx&&u.distAxX>=d.threshold&&(u.distAxX=0,a=this.placeEl.prev(d.itemNodeName),u.distX>0&&a.length&&!a.hasClass(d.collapsedClass)&&(o=a.find(d.listNodeName).last(),c=this.placeEl.parents(d.listNodeName).length,c+this.dragDepth<=d.maxDepth&&(o.length?(o=a.children(d.listNodeName).last(),o.append(this.placeEl)):(o=e("<"+d.listNodeName+"/>").addClass(d.listClass),o.append(this.placeEl),a.append(o),this.setParent(a)))),u.distX<0&&(l=this.placeEl.next(d.itemNodeName),l.length||(s=this.placeEl.parent(),this.placeEl.closest(d.itemNodeName).after(this.placeEl),s.children().length||this.unsetParent(s.parent()))));var p=!1;if(r||(this.dragEl[0].style.visibility="hidden"),this.pointEl=e(i.elementFromPoint(n.pageX-i.body.scrollLeft,n.pageY-(t.pageYOffset||i.documentElement.scrollTop))),r||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(d.handleClass)&&(this.pointEl=this.pointEl.parent(d.itemNodeName)),this.pointEl.hasClass(d.emptyClass))p=!0;else if(!this.pointEl.length||!this.pointEl.hasClass(d.itemClass))return;var f=this.pointEl.closest("."+d.rootClass),m=this.dragRootEl.data("nestable-id")!==f.data("nestable-id");if(!u.dirAx||m||p){if(m&&d.group!==f.data("nestable-group"))return;if(c=this.dragDepth-1+this.pointEl.parents(d.listNodeName).length,c>d.maxDepth)return;var g=n.pageY<this.pointEl.offset().top+this.pointEl.height()/2;s=this.placeEl.parent(),p?(o=e(i.createElement(d.listNodeName)).addClass(d.listClass),o.append(this.placeEl),this.pointEl.replaceWith(o)):g?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),s.children().length||this.unsetParent(s.parent()),this.dragRootEl.find(d.itemNodeName).length||this.dragRootEl.append('<div class="'+d.emptyClass+'"/>'),m&&(this.dragRootEl=f,this.hasNewRoot=this.el[0]!==this.dragRootEl[0])}}},e.fn.nestable=function(t){var i=this,n=this;return i.each(function(){var i=e(this).data("nestable");i?"string"==typeof t&&"function"==typeof i[t]&&(n=i[t]()):(e(this).data("nestable",new o(this,t)),e(this).data("nestable-id",(new Date).getTime()))}),n||i}}(window.jQuery||window.Zepto,window,document),function(e){"use strict"}(jQuery),!function(){"use strict";function e(e){return e.split("").reverse().join("")}function t(e,t){return e.substring(0,t.length)===t}function i(e,t){return e.slice(-1*t.length)===t}function n(e,t,i){if((e[t]||e[i])&&e[t]===e[i])throw new Error(t)}function o(e){return"number"==typeof e&&isFinite(e)}function s(e,t){var i=Math.pow(10,t);return(Math.round(e*i)/i).toFixed(t)}function r(t,i,n,r,a,l,c,d,u,h,p,f){var m,g,v,y=f,b="",w="";return l&&(f=l(f)),o(f)?(t!==!1&&0===parseFloat(f.toFixed(t))&&(f=0),0>f&&(m=!0,f=Math.abs(f)),t!==!1&&(f=s(f,t)),f=f.toString(),-1!==f.indexOf(".")?(g=f.split("."),v=g[0],n&&(b=n+g[1])):v=f,i&&(v=e(v).match(/.{1,3}/g),v=e(v.join(e(i)))),m&&d&&(w+=d),r&&(w+=r),m&&u&&(w+=u),w+=v,w+=b,a&&(w+=a),h&&(w=h(w,y)),w):!1}function a(e,n,s,r,a,l,c,d,u,h,p,f){var m,g="";return p&&(f=p(f)),f&&"string"==typeof f?(d&&t(f,d)&&(f=f.replace(d,""),m=!0),r&&t(f,r)&&(f=f.replace(r,"")),u&&t(f,u)&&(f=f.replace(u,""),m=!0),a&&i(f,a)&&(f=f.slice(0,-1*a.length)),n&&(f=f.split(n).join("")),s&&(f=f.replace(s,".")),m&&(g+="-"),g+=f,g=g.replace(/[^0-9\.\-.]/g,""),""===g?!1:(g=Number(g),c&&(g=c(g)),o(g)?g:!1)):!1}function l(e){var t,i,o,s={};for(t=0;t<u.length;t+=1)if(i=u[t],o=e[i],void 0===o)s[i]="negative"!==i||s.negativeBefore?"mark"===i&&"."!==s.thousand?".":!1:"-";else if("decimals"===i){if(!(o>=0&&8>o))throw new Error(i);s[i]=o}else if("encoder"===i||"decoder"===i||"edit"===i||"undo"===i){if("function"!=typeof o)throw new Error(i);s[i]=o}else{if("string"!=typeof o)throw new Error(i);s[i]=o}return n(s,"mark","thousand"),n(s,"prefix","negative"),n(s,"prefix","negativeBefore"),s}function c(e,t,i){var n,o=[];for(n=0;n<u.length;n+=1)o.push(e[u[n]]);return o.push(i),t.apply("",o)}function d(e){return this instanceof d?void("object"==typeof e&&(e=l(e),this.to=function(t){return c(e,r,t)},this.from=function(t){return c(e,a,t)})):new d(e)}var u=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=d}(),function(e){"use strict";function t(t){return t instanceof e||e.zepto&&e.zepto.isZ(t)}function i(t,i){return"string"==typeof t&&0===t.indexOf("-inline-")?(this.method=i||"html",this.target=this.el=e(t.replace("-inline-","")||"<div/>"),!0):void 0}function n(t){if("string"==typeof t&&0!==t.indexOf("-")){this.method="val";var i=document.createElement("input");return i.name=t,i.type="hidden",this.target=this.el=e(i),!0}}function o(e){return"function"==typeof e?(this.target=!1,
this.method=e,!0):void 0}function s(e,i){return t(e)&&!i?(e.is("input, select, textarea")?(this.method="val",this.target=e.on("change.liblink",this.changeHandler)):(this.target=e,this.method="html"),!0):void 0}function r(e,i){return t(e)&&("function"==typeof i||"string"==typeof i&&e[i])?(this.method=i,this.target=e,!0):void 0}function a(t,i,n){var o=this,s=!1;if(this.changeHandler=function(t){var i=o.formatInstance.from(e(this).val());return i===!1||isNaN(i)?(e(this).val(o.lastSetValue),!1):void o.changeHandlerMethod.call("",t,i)},this.el=!1,this.formatInstance=n,e.each(d,function(e,n){return s=n.call(o,t,i),!s}),!s)throw new RangeError("(Link) Invalid Link.")}function l(e){this.items=[],this.elements=[],this.origin=e}function c(t,i,n,o){0===t&&(t=this.LinkDefaultFlag),this.linkAPI||(this.linkAPI={}),this.linkAPI[t]||(this.linkAPI[t]=new l(this));var s=new a(i,n,o||this.LinkDefaultFormatter);s.target||(s.target=e(this)),s.changeHandlerMethod=this.LinkConfirm(t,s.el),this.linkAPI[t].push(s,s.el),this.LinkUpdate(t)}var d=[i,n,o,s,r];a.prototype.set=function(e){var t=Array.prototype.slice.call(arguments),i=t.slice(1);this.lastSetValue=this.formatInstance.to(e),i.unshift(this.lastSetValue),("function"==typeof this.method?this.method:this.target[this.method]).apply(this.target,i)},l.prototype.push=function(e,t){this.items.push(e),t&&this.elements.push(t)},l.prototype.reconfirm=function(e){var t;for(t=0;t<this.elements.length;t+=1)this.origin.LinkConfirm(e,this.elements[t])},l.prototype.remove=function(){var e;for(e=0;e<this.items.length;e+=1)this.items[e].target.off(".liblink");for(e=0;e<this.elements.length;e+=1)this.elements[e].remove()},l.prototype.change=function(e){if(this.origin.LinkIsEmitting)return!1;this.origin.LinkIsEmitting=!0;var t,i=Array.prototype.slice.call(arguments,1);for(i.unshift(e),t=0;t<this.items.length;t+=1)this.items[t].set.apply(this.items[t],i);this.origin.LinkIsEmitting=!1},e.fn.Link=function(t){var i=this;if(t===!1)return i.each(function(){this.linkAPI&&(e.map(this.linkAPI,function(e){e.remove()}),delete this.linkAPI)});if(void 0===t)t=0;else if("string"!=typeof t)throw new Error("Flag must be string.");return{to:function(e,n,o){return i.each(function(){c.call(this,t,e,n,o)})}}}}(window.jQuery||window.Zepto),function(e){"use strict";function t(t){return e.grep(t,function(i,n){return n===e.inArray(i,t)})}function i(e,t){return Math.round(e/t)*t}function n(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function o(e){var t=Math.pow(10,7);return Number((Math.round(e*t)/t).toFixed(7))}function s(e,t,i){e.addClass(t),setTimeout(function(){e.removeClass(t)},i)}function r(e){return Math.max(Math.min(e,100),0)}function a(t){return e.isArray(t)?t:[t]}function l(e){var t=e.split(".");return t.length>1?t[1].length:0}function c(e,t){return 100/(t-e)}function d(e,t){return 100*t/(e[1]-e[0])}function u(e,t){return d(e,e[0]<0?t+Math.abs(e[0]):t-e[0])}function h(e,t){return t*(e[1]-e[0])/100+e[0]}function p(e,t){for(var i=1;e>=t[i];)i+=1;return i}function f(e,t,i){if(i>=e.slice(-1)[0])return 100;var n,o,s,r,a=p(i,e);return n=e[a-1],o=e[a],s=t[a-1],r=t[a],s+u([n,o],i)/c(s,r)}function m(e,t,i){if(i>=100)return e.slice(-1)[0];var n,o,s,r,a=p(i,t);return n=e[a-1],o=e[a],s=t[a-1],r=t[a],h([n,o],(i-s)*c(s,r))}function g(e,t,n,o){if(100===o)return o;var s,r,a=p(o,e);return n?(s=e[a-1],r=e[a],o-s>(r-s)/2?r:s):t[a-1]?e[a-1]+i(o-e[a-1],t[a-1]):o}function v(e,t,i){var o;if("number"==typeof t&&(t=[t]),"[object Array]"!==Object.prototype.toString.call(t))throw new Error("noUiSlider: 'range' contains invalid value.");if(o="min"===e?0:"max"===e?100:parseFloat(e),!n(o)||!n(t[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");i.xPct.push(o),i.xVal.push(t[0]),o?i.xSteps.push(isNaN(t[1])?!1:t[1]):isNaN(t[1])||(i.xSteps[0]=t[1])}function y(e,t,i){return t?void(i.xSteps[e]=d([i.xVal[e],i.xVal[e+1]],t)/c(i.xPct[e],i.xPct[e+1])):!0}function b(e,t,i,n){this.xPct=[],this.xVal=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=t,this.direction=i;var o,s=[];for(o in e)e.hasOwnProperty(o)&&s.push([e[o],o]);for(s.sort(function(e,t){return e[0]-t[0]}),o=0;o<s.length;o++)v(s[o][1],s[o][0],this);for(this.xNumSteps=this.xSteps.slice(0),o=0;o<this.xNumSteps.length;o++)y(o,this.xNumSteps[o],this)}function w(e,t){if(!n(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function _(t,i){if("object"!=typeof i||e.isArray(i))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===i.min||void 0===i.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new b(i,t.snap,t.dir,t.singleStep)}function k(t,i){if(i=a(i),!e.isArray(i)||!i.length||i.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=i.length,t.start=i}function C(e,t){if(e.snap=t,"boolean"!=typeof t)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function x(e,t){if(e.animate=t,"boolean"!=typeof t)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function D(e,t){if("lower"===t&&1===e.handles)e.connect=1;else if("upper"===t&&1===e.handles)e.connect=2;else if(t===!0&&2===e.handles)e.connect=3;else{if(t!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");e.connect=0}}function T(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function M(e,t){if(!n(t))throw new Error("noUiSlider: 'margin' option must be numeric.");if(e.margin=e.spectrum.getMargin(t),!e.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function E(e,t){if(!n(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(t),!e.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function S(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1,e.connect=[0,2,1,3][e.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function $(e,t){if("string"!=typeof t)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var i=t.indexOf("tap")>=0,n=t.indexOf("drag")>=0,o=t.indexOf("fixed")>=0,s=t.indexOf("snap")>=0;e.events={tap:i||s,drag:n,fixed:o,snap:s}}function U(e,t){if(e.format=t,"function"==typeof t.to&&"function"==typeof t.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function F(t){var i,n={margin:0,limit:0,animate:!0,format:J};return i={step:{r:!1,t:w},start:{r:!0,t:k},connect:{r:!0,t:D},direction:{r:!0,t:S},snap:{r:!1,t:C},animate:{r:!1,t:x},range:{r:!0,t:_},orientation:{r:!1,t:T},margin:{r:!1,t:M},limit:{r:!1,t:E},behaviour:{r:!0,t:$},format:{r:!1,t:U}},t=e.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},t),e.each(i,function(e,i){if(void 0===t[e]){if(i.r)throw new Error("noUiSlider: '"+e+"' is required.");return!0}i.t(n,t[e])}),n.style=n.ort?"top":"left",n}function I(e,t,i){var n=e+t[0],o=e+t[1];return i?(0>n&&(o+=Math.abs(n)),o>100&&(n-=o-100),[r(n),r(o)]):[n,o]}function N(e){e.preventDefault();var t,i,n=0===e.type.indexOf("touch"),o=0===e.type.indexOf("mouse"),s=0===e.type.indexOf("pointer"),r=e;return 0===e.type.indexOf("MSPointer")&&(s=!0),e.originalEvent&&(e=e.originalEvent),n&&(t=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY),(o||s)&&(s||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),t=e.clientX+window.pageXOffset,i=e.clientY+window.pageYOffset),r.points=[t,i],r.cursor=o,r}function A(t,i){var n=e("<div><div/></div>").addClass(Q[2]),o=["-lower","-upper"];return t&&o.reverse(),n.children().addClass(Q[3]+" "+Q[3]+o[i]),n}function j(e,t,i){switch(e){case 1:t.addClass(Q[7]),i[0].addClass(Q[6]);break;case 3:i[1].addClass(Q[6]);case 2:i[0].addClass(Q[7]);case 0:t.addClass(Q[6])}}function O(e,t,i){var n,o=[];for(n=0;e>n;n+=1)o.push(A(t,n).appendTo(i));return o}function z(t,i,n){return n.addClass([Q[0],Q[8+t],Q[4+i]].join(" ")),e("<div/>").appendTo(n).addClass(Q[1])}function P(t,i,n){function o(){return E[["width","height"][i.ort]]()}function c(e){var t,i=[$.val()];for(t=0;t<e.length;t+=1)$.trigger(e[t],i)}function d(e){return 1===e.length?e[0]:i.dir?e.reverse():e}function u(e){return function(t,i){$.val([e?null:i,e?i:null],!0)}}function h(t){var i=e.inArray(t,P);$[0].linkAPI&&$[0].linkAPI[t]&&$[0].linkAPI[t].change(A[i],S[i].children(),$)}function p(t,n){var o=e.inArray(t,P);return n&&n.appendTo(S[o].children()),i.dir&&i.handles>1&&(o=1===o?0:1),u(o)}function f(){var e,t;for(e=0;e<P.length;e+=1)this.linkAPI&&this.linkAPI[t=P[e]]&&this.linkAPI[t].reconfirm(t)}function m(e,t,n,o){return e=e.replace(/\s/g,q+" ")+q,t.on(e,function(e){return $.attr("disabled")?!1:$.hasClass(Q[14])?!1:(e=N(e),e.calcPoint=e.points[i.ort],void n(e,o))})}function g(e,t){var i,n=t.handles||S,s=!1,r=100*(e.calcPoint-t.start)/o(),a=n[0][0]!==S[0][0]?1:0;i=I(r,t.positions,n.length>1),s=_(n[0],i[a],1===n.length),n.length>1&&(s=_(n[1],i[a?0:1],!1)||s),s&&c(["slide"])}function v(t){e("."+Q[15]).removeClass(Q[15]),t.cursor&&e("body").css("cursor","").off(q),B.off(q),$.removeClass(Q[12]),c(["set","change"])}function y(t,i){1===i.handles.length&&i.handles[0].children().addClass(Q[15]),t.stopPropagation(),m(X.move,B,g,{start:t.calcPoint,handles:i.handles,positions:[U[0],U[S.length-1]]}),m(X.end,B,v,null),t.cursor&&(e("body").css("cursor",e(t.target).css("cursor")),S.length>1&&$.addClass(Q[12]),e("body").on("selectstart"+q,!1))}function b(t){var n,r=t.calcPoint,a=0;t.stopPropagation(),e.each(S,function(){a+=this.offset()[i.style]}),a=a/2>r||1===S.length?0:1,r-=E.offset()[i.style],n=100*r/o(),i.events.snap||s($,Q[14],300),_(S[a],n),c(["slide","set","change"]),i.events.snap&&y(t,{handles:[S[a]]})}function w(e){var t,i;if(!e.fixed)for(t=0;t<S.length;t+=1)m(X.start,S[t].children(),y,{handles:[S[t]]});e.tap&&m(X.start,E,b,{handles:S}),e.drag&&(i=E.find("."+Q[7]).addClass(Q[10]),e.fixed&&(i=i.add(E.children().not(i).children())),m(X.start,i,y,{handles:S}))}function _(e,t,n){var o=e[0]!==S[0][0]?1:0,s=U[0]+i.margin,a=U[1]-i.margin,l=U[0]+i.limit,c=U[1]-i.limit;return S.length>1&&(t=o?Math.max(t,s):Math.min(t,a)),n!==!1&&i.limit&&S.length>1&&(t=o?Math.min(t,l):Math.max(t,c)),t=F.getStep(t),t=r(parseFloat(t.toFixed(7))),t===U[o]?!1:(e.css(i.style,t+"%"),e.is(":first-child")&&e.toggleClass(Q[17],t>50),U[o]=t,A[o]=F.fromStepping(t),h(P[o]),!0)}function k(e,t){var n,o,s;for(i.limit&&(e+=1),n=0;e>n;n+=1)o=n%2,s=t[o],null!==s&&s!==!1&&("number"==typeof s&&(s=String(s)),s=i.format.from(s),(s===!1||isNaN(s)||_(S[o],F.toStepping(s),n===3-i.dir)===!1)&&h(P[o]))}function C(e){if($[0].LinkIsEmitting)return this;var t,n=a(e);return i.dir&&i.handles>1&&n.reverse(),i.animate&&-1!==U[0]&&s($,Q[14],300),t=S.length>1?3:1,1===n.length&&(t=1),k(t,n),c(["set"]),this}function x(){var e,t=[];for(e=0;e<i.handles;e+=1)t[e]=i.format.to(A[e]);return d(t)}function D(){return e(this).off(q).removeClass(Q.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,n}function T(){var t=e.map(U,function(e,t){var i=F.getApplicableStep(e),n=l(String(i[2])),o=A[t],s=100===e?null:i[2],r=Number((o-i[2]).toFixed(n)),a=0===e?null:r>=i[1]?i[2]:i[0]||!1;return[[a,s]]});return d(t)}function M(){return n}var E,S,$=e(t),U=[-1,-1],F=i.spectrum,A=[],P=["lower","upper"].slice(0,i.handles);if(i.dir&&P.reverse(),t.LinkUpdate=h,t.LinkConfirm=p,t.LinkDefaultFormatter=i.format,t.LinkDefaultFlag="lower",t.reappend=f,$.hasClass(Q[0]))throw new Error("Slider was already initialized.");E=z(i.dir,i.ort,$),S=O(i.handles,i.dir,E),j(i.connect,$,S),w(i.events),t.vSet=C,t.vGet=x,t.destroy=D,t.getCurrentStep=T,t.getOriginalOptions=M,t.getInfo=function(){return[F,i.style,i.ort]},$.val(i.start)}function L(e){var t=F(e,this);return this.each(function(){P(this,t,e)})}function R(t){return this.each(function(){if(!this.destroy)return void e(this).noUiSlider(t);var i=e(this).val(),n=this.destroy(),o=e.extend({},n,t);e(this).noUiSlider(o),this.reappend(),n.start===o.start&&e(this).val(i)})}function V(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}function H(t,i,n,o){if("range"===i||"steps"===i)return t.xVal;if("count"===i){var s,r=100/(n-1),a=0;for(n=[];(s=a++*r)<=100;)n.push(s);i="positions"}return"positions"===i?e.map(n,function(e){return t.fromStepping(o?t.getStep(e):e)}):"values"===i?o?e.map(n,function(e){return t.fromStepping(t.getStep(t.toStepping(e)))}):n:void 0}function Y(i,n,o,s){var r=i.direction,a={},l=i.xVal[0],c=i.xVal[i.xVal.length-1],d=!1,u=!1,h=0;return i.direction=0,s=t(s.slice().sort(function(e,t){return e-t})),s[0]!==l&&(s.unshift(l),d=!0),s[s.length-1]!==c&&(s.push(c),u=!0),e.each(s,function(t){var r,l,c,p,f,m,g,v,y,b,w=s[t],_=s[t+1];if("steps"===o&&(r=i.xNumSteps[t]),r||(r=_-w),w!==!1&&void 0!==_)for(l=w;_>=l;l+=r){for(p=i.toStepping(l),f=p-h,v=f/n,y=Math.round(v),b=f/y,c=1;y>=c;c+=1)m=h+c*b,a[m.toFixed(5)]=["x",0];g=e.inArray(l,s)>-1?1:"steps"===o?2:0,!t&&d&&(g=0),l===_&&u||(a[p.toFixed(5)]=[l,g]),h=p}}),i.direction=r,a}function G(t,i,n,o,s,r){function a(e){return["-normal","-large","-sub"][e]}function l(e,i,n){return'class="'+i+" "+i+"-"+d+" "+i+a(n[1],n[0])+'" style="'+t+": "+e+'%"'}function c(e,t){n&&(e=100-e),t[1]=t[1]&&s?s(t[0],t[1]):t[1],u.append("<div "+l(e,"noUi-marker",t)+"></div>"),t[1]&&u.append("<div "+l(e,"noUi-value",t)+">"+r.to(t[0])+"</div>")}var d=["horizontal","vertical"][i],u=e("<div/>");return u.addClass("noUi-pips noUi-pips-"+d),e.each(o,c),u}var B=e(document),W=e.fn.val,q=".nui",X=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Q=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];b.prototype.getMargin=function(e){return 2===this.xPct.length?d(this.xVal,e):!1},b.prototype.toStepping=function(e){return e=f(this.xVal,this.xPct,e),this.direction&&(e=100-e),e},b.prototype.fromStepping=function(e){return this.direction&&(e=100-e),o(m(this.xVal,this.xPct,e))},b.prototype.getStep=function(e){return this.direction&&(e=100-e),e=g(this.xPct,this.xSteps,this.snap,e),this.direction&&(e=100-e),e},b.prototype.getApplicableStep=function(e){var t=p(e,this.xPct),i=100===e?2:1;return[this.xNumSteps[t-2],this.xVal[t-i],this.xNumSteps[t-i]]},b.prototype.convert=function(e){return this.getStep(this.toStepping(e))};var J={to:function(e){return e.toFixed(2)},from:Number};e.fn.val=function(t){function i(e){return e.hasClass(Q[0])?V:W}if(!arguments.length){var n=e(this[0]);return i(n).call(n)}var o=e.isFunction(t);return this.each(function(n){var s=t,r=e(this);o&&(s=t.call(this,n,r.val())),i(r).call(r,s)})},e.fn.noUiSlider=function(e,t){switch(e){case"step":return this[0].getCurrentStep();case"options":return this[0].getOriginalOptions()}return(t?R:L).call(this,e)},e.fn.noUiSlider_pips=function(t){var i=t.mode,n=t.density||1,o=t.filter||!1,s=t.values||!1,r=t.format||{to:Math.round},a=t.stepped||!1;return this.each(function(){var t=this.getInfo(),l=H(t[0],i,s,a),c=Y(t[0],n,i,l);return e(this).append(G(t[1],t[2],t[0].direction,c,o,r))})}}(window.jQuery||window.Zepto);var PassGenJS=function(){"use strict";function e(e,t){var i=t-e+1;return Math.floor(Math.random()*i)+e}function t(t){return t=t?t:[],t.length>0?t[e(0,t.length-1)]:null}function i(i){i=i?i:{};for(var n=i.symbols?i.symbols:0,o=i.numbers?i.numbers:0,s=i.letters?i.letters:0,r=i.lettersUpper?i.lettersUpper:0,a=n+o+s+r,l="",c={letters:0,lettersUpper:0,numbers:0,symbols:0},d={letters:!0,lettersUpper:!0,numbers:!0,symbols:!0},f=0;a>f;f++){d.letters&&c.letters==s&&(d.letters=!1),d.lettersUpper&&c.lettersUpper==r&&(d.lettersUpper=!1),d.numbers&&c.numbers==o&&(d.numbers=!1),d.symbols&&c.symbols==n&&(d.symbols=!1);var m=[];for(var g in d)d[g]&&(m[m.length]=g);var v=t(m),y="";switch(v){case"letters":y=u[e(0,u.length-1)],c.letters++;break;case"lettersUpper":y=u[e(0,u.length-1)].toUpperCase(),c.lettersUpper++;break;case"numbers":y=h[e(0,h.length-1)],c.numbers++;break;case"symbols":y=p[e(0,p.length-1)],c.symbols++}l+=y}return l}function n(e){var n="",r=0,a=0,l=void 0!==e.maxGenerateRecursion?e.maxGenerateRecursion:d,c={};if(e)if(e.score||e.reliabilityPercent){f||(f=s());var u=f,h=[];if(void 0!==e.score){if(e.score=parseInt(e.score),0==e.score)return"";(e.score>4||e.score<0)&&(e.score=4);for(var p in u)u[p].score==e.score&&(h[h.length]=p)}else if(void 0!==e.reliabilityPercent){e.reliabilityPercent=parseInt(e.reliabilityPercent);var m=[];if(0==e.reliabilityPercent)return"";(e.reliabilityPercent>100||e.reliabilityPercent<0)&&(e.reliabilityPercent=100);for(var p in u)m[m.length]=u[p].reliabilityPercent,u[p].reliabilityPercent==e.reliabilityPercent&&(h[h.length]=p);if(!h.length){m.sort(function(e,t){return t>e?-1:e>t?1:0});for(var g=m.length,v=null,y=0;g>y;y++)if(m[y]>e.reliabilityPercent){v=m[y];break}if(!v){m.reverse();for(var y=0;g>y;y++)if(m[y]<e.reliabilityPercent){v=m[y];break}}for(var p in u)u[p].reliabilityPercent==v&&(h[h.length]=p)}}var b=t(h);b&&(b=b.split("-"),c={letters:b[1],lettersUpper:b[3],numbers:b[0],symbols:b[2]})}else c={letters:e.letters,lettersUpper:e.lettersUpper,numbers:e.numbers,symbols:e.symbols};else c={letters:4,lettersUpper:2,numbers:2,symbols:1};for(var y=0;l>=y;y++){var w=i(c);if(r=o(w).entropy,e.score){if(e.score==o(w).score){n=w;break}}else r>a&&(a=r,n=w)}return n||(n=w),n}function o(e){var t={},i=0,n=0,o=e.split("");for(var s in o)!t.strLetters&&r.indexOf(o[s])>-1?t.strLetters=r.length:!t.strNumbers&&l.indexOf(o[s])>-1?t.strNumbers=l.length:!t.strSymbols&&c.indexOf(o[s])>-1?t.strSymbols=c.length:!t.strLettersUpper&&a.indexOf(o[s])>-1&&(t.strLettersUpper=a.length);var d=0;for(var s in t)d+=t[s];i=d?Math.round(e.length*(Math.log(d)/Math.log(2))):0,i>0&&56>i?n=1:i>=56&&64>i?n=2:i>=64&&128>i?n=3:i>=128&&(n=4);var u=i/1.28;return u=100>u?u:100,{password:e,score:n,entropy:i,reliability:u,reliabilityPercent:Math.round(u)}}function s(){for(var e={},t=0;6666>t;t++){var i=t+"";10>t?i="000"+t:t>=10&&100>t?i="00"+t:t>=100&&1e3>t&&(i="0"+t);var n=i.split("");if(!(parseInt(n[0])+parseInt(n[1])+parseInt(n[2])+parseInt(n[3])>20)){var s=n.join("-"),d=l.substr(0,n[0])+r.substr(0,n[1])+c.substr(0,n[2])+a.substr(0,n[3]),u=o(d);0!=u.score&&(e[s]={score:u.score,reliabilityPercent:u.reliabilityPercent})}}return e}var r="qwertyuiopasdfghjklzxcvbnm",a=r.toUpperCase(),l="0123456789",c="!@#$%^&*()_+-={}[]:;|?<>/\"'~",d=1,u=r.split(""),h=(a.split(""),l.split("")),p=c.split(""),f=null;return{getPassword:function(e){var t=n(e);return t},getScore:function(e){return o(e)}}}();!function(e){"use strict";e.fn.timeoutClass=function(t,i){i=i||10;var n=this;setTimeout(function(){e(n).toggleClass(t)},i)},e.fn.extend({popover:function(t){this.defaults={};var i,n,o,s=(e.extend({},this.defaults,t),!1),r=100,a={},l=e("#page-wrapper");return a.position=function(t){var i=0,n=(e(window).width(),0);return o=e(t).hasClass("trigger-popover")?e(t):e(t).closest(".trigger-popover"),i=o.offset().left+o.width(),n=o.offset().top+o.height()+8,{left:i,top:n}},a.hide=function(t){e(".popover.open").length?(n=e(".popover.open"),n.removeClass("animate"),setTimeout(function(){n.removeClass("open"),"function"==typeof t&&t.apply()},250)):"function"==typeof t&&t.apply()},l.on("click",function(t){!s&&!e(".popover.open").length||e(t.target).closest(".trigger-popover").length||e(t.target).closest(".popover").length||a.hide()}),e(window).resize(function(){a.hide()}),l.scroll(function(){s===!0&&(i+r<l.scrollTop()||i-r>l.scrollTop())&&a.hide()}),this.each(function(){e(this).on("click",function(t){t.preventDefault();var n,o=e(this).data("popover");s=!0,a.hide(function(){0==e("#popover-"+o).length?(n=e(template("tpl_"+o,{})),l.append(n)):n=e("#popover-"+o),e("#popover-"+o).hasClass("open")||(i=l.scrollTop(),n.css(a.position(t.target)),n.toggleClass("open").timeoutClass("animate"))})})})}})}(jQuery);var category,controls;